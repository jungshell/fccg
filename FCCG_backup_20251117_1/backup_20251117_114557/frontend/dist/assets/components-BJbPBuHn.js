const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pages-D8utAuX0.js","assets/chakra-BT2iv3Tk.js","assets/vendor-oOSsakeb.js","assets/router-BvJvrfH7.js","assets/state-C_3GyNnL.js"])))=>i.map(i=>d[i]);
var ct=Object.defineProperty,dt=Object.defineProperties;var ut=Object.getOwnPropertyDescriptors;var Je=Object.getOwnPropertySymbols;var ht=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var Le=(i,n,x)=>n in i?ct(i,n,{enumerable:!0,configurable:!0,writable:!0,value:x}):i[n]=x,M=(i,n)=>{for(var x in n||(n={}))ht.call(n,x)&&Le(i,x,n[x]);if(Je)for(var x of Je(n))gt.call(n,x)&&Le(i,x,n[x]);return i},B=(i,n)=>dt(i,ut(n));var Oe=(i,n,x)=>Le(i,typeof n!="symbol"?n+"":n,x);var _=(i,n,x)=>new Promise((s,C)=>{var he=r=>{try{J(x.next(r))}catch(c){C(c)}},w=r=>{try{J(x.throw(r))}catch(c){C(c)}},J=r=>r.done?s(r.value):Promise.resolve(r.value).then(he,w);J((x=x.apply(i,n)).next())});import{u as be,r as mt,l as pt,e as fe,E as xe,_ as We,A as Ye,a as ft,b as Qe,c as Xe,d as xt,f as bt,g as Ge,h as Te,i as jt}from"./pages-D8utAuX0.js";import{r as b,z as Re,j as e,B as A,d as Fe,ac as Ze,V as ce,L as H,N as q,E as Q,w as k,u as Me,at as wt,au as yt,I as Ae,av as vt,aq as et,M as ye,a as ve,b as Se,c as ze,e as Ce,A as tt,q as ot,aw as St,ax as Ct,ai as Et,F as Be,H as $,T as v,ak as nt,$ as It,ay as At,az as Dt,v as De,m as we,ab as Ke,R as je,U as _e,a3 as rt,a4 as st,a5 as Pe,a6 as de,a7 as at,a8 as ue,G as it,J as Ue,Q as $e,aA as kt,n as Tt}from"./chakra-BT2iv3Tk.js";import{u as He,a as lt}from"./router-BvJvrfH7.js";const Mt=({onSwitch:i,onClose:n})=>{const[x,s]=b.useState(""),[C,he]=b.useState(""),[w,J]=b.useState(""),[r,c]=b.useState(""),[E,h]=b.useState(!1),G=be(N=>N.setUser),U=be(N=>N.setToken),L=Re(),Y=He(),X=N=>_(null,null,function*(){var re,se,ae,Z,oe,j,F,D,ee,ie;if(N.preventDefault(),!x||!C||!w){L({title:"íšŒì›ê°€ì… ì‹¤íŒ¨",description:"í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.",status:"error",duration:3e3,isClosable:!0});return}h(!0);try{const{token:z,user:O}=yield mt({email:x,password:C,name:w,phone:r});G(O),U(z),L({title:"íšŒì›ê°€ì… ì„±ê³µ",status:"success",duration:2e3,isClosable:!0}),n&&n(),Y("/")}catch(z){let O="ì˜¤ë¥˜ ë°œìƒ";if(z&&typeof z=="object"&&"response"in z){const W=z;((re=W.response)==null?void 0:re.status)===400?O=((se=W.response.data)==null?void 0:se.error)||((ae=W.response.data)==null?void 0:ae.message)||"ì…ë ¥ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.":((Z=W.response)==null?void 0:Z.status)===409?O="ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤.":((oe=W.response)==null?void 0:oe.status)===404?O="íšŒì›ê°€ì… ì„œë¹„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.":((j=W.response)==null?void 0:j.status)===500?O="ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.":(D=(F=W.response)==null?void 0:F.data)!=null&&D.error?O=W.response.data.error:(ie=(ee=W.response)==null?void 0:ee.data)!=null&&ie.message&&(O=W.response.data.message)}else z&&typeof z=="object"&&"message"in z&&(O=z.message);L({title:"íšŒì›ê°€ì… ì‹¤íŒ¨",description:O,status:"error",duration:5e3,isClosable:!0})}finally{h(!1)}});return e.jsxs(A,{bgGradient:"linear(to-br, #004ea8, #1f2937)",borderRadius:"xl",p:0,px:8,py:8,minHeight:"320px",alignSelf:"center",position:"relative",children:[i&&e.jsx(Fe,{color:"white",position:"absolute",top:"1rem",right:"1rem",zIndex:100,size:"lg",bg:"rgba(0,0,0,0.25)",_hover:{bg:"rgba(0,0,0,0.35)"},_focus:{boxShadow:"none"},borderRadius:"full",m:0,transform:"none",onClick:i}),e.jsxs(A,{bg:"white",borderRadius:"xl",p:8,boxShadow:"lg",w:"full",maxW:"sm",minW:320,children:[e.jsx(Ze,{mb:6,color:"#004ea8",fontFamily:"Pretendard, Inter, sans-serif",fontWeight:"bold",textAlign:"center",children:"íšŒì›ê°€ì…"}),e.jsx("form",{onSubmit:X,children:e.jsxs(ce,{spacing:4,children:[e.jsxs(H,{id:"email",isRequired:!0,children:[e.jsx(q,{children:"ì´ë©”ì¼"}),e.jsx(Q,{type:"email",value:x,onChange:N=>s(N.target.value),placeholder:"ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”",rounded:"lg",bg:"gray.50",_dark:{bg:"#374151"}})]}),e.jsxs(H,{id:"password",isRequired:!0,children:[e.jsx(q,{children:"ë¹„ë°€ë²ˆí˜¸"}),e.jsx(Q,{type:"password",value:C,onChange:N=>he(N.target.value),placeholder:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”",rounded:"lg",bg:"gray.50",_dark:{bg:"#374151"}})]}),e.jsxs(H,{id:"name",isRequired:!0,children:[e.jsx(q,{children:"ì´ë¦„"}),e.jsx(Q,{value:w,onChange:N=>J(N.target.value),placeholder:"ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”",rounded:"lg",bg:"gray.50",_dark:{bg:"#374151"}})]}),e.jsxs(H,{id:"phone",children:[e.jsx(q,{children:"íœ´ëŒ€í° ë²ˆí˜¸"}),e.jsx(Q,{value:r,onChange:N=>c(N.target.value),placeholder:"íœ´ëŒ€í° ë²ˆí˜¸ (ì„ íƒ)",rounded:"lg",bg:"gray.50",_dark:{bg:"#374151"}})]}),e.jsx(k,{type:"submit",colorScheme:"blue",bg:"#004ea8",_hover:{bg:"#00397a"},w:"full",rounded:"lg",isLoading:E,fontWeight:"bold",children:"íšŒì›ê°€ì…"}),i&&e.jsx(k,{variant:"outline",color:"#004ea8",borderColor:"#004ea8",borderWidth:1,borderStyle:"solid",rounded:"lg",w:"full",mt:2,fontWeight:"bold",bg:"white",_hover:{bg:"#e6f0fa"},onClick:i,children:"ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸"})]})})]})]})},Nt=({onSwitch:i,onClose:n})=>{const[x,s]=b.useState(""),[C,he]=b.useState(""),[w,J]=b.useState(!1),[r,c]=b.useState(!1),[E,h]=b.useState(null),G=be(j=>j.setUser),U=be(j=>j.setToken),L=Re(),Y=He(),X=lt(),{isOpen:N,onOpen:re,onClose:se}=Me(),ae=j=>{if(!j)return null;if(j.voteAttendance<50)return{type:"vote",title:"íˆ¬í‘œ ì°¸ì—¬ìœ¨ ê²½ê³ ",message:`í˜„ì¬ íˆ¬í‘œ ì°¸ì—¬ìœ¨ì´ ${j.voteAttendance}%ì…ë‹ˆë‹¤. 4íšŒ ì—°ì† ë¯¸ì°¸ì—¬ ë˜ëŠ” 3ê°œì›”ê°„ 6íšŒ ë¯¸ì°¸ì—¬ ì‹œ ë¹„í™œì„± ìƒíƒœë¡œ ë³€ê²½ë©ë‹ˆë‹¤.`,severity:"warning"};if(j.attendance<30)return{type:"game",title:"ê²½ê¸° ì°¸ì—¬ìœ¨ ê²½ê³ ",message:"3ê°œì›”ê°„ ì¶•êµ¬ê²½ê¸°ì— ì°¸ì—¬í•˜ì§€ ì•Šìœ¼ë©´ ë¹„í™œì„± ìƒíƒœë¡œ ë³€ê²½ë©ë‹ˆë‹¤.",severity:"warning"};if(j.lastLoginAt){const F=new Date(j.lastLoginAt),D=Math.floor((Date.now()-F.getTime())/(1e3*60*60*24));if(D>30)return{type:"login",title:"ë¡œê·¸ì¸ ê²½ê³ ",message:`${D}ì¼ê°„ ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. 2ê°œì›”ê°„ ë¡œê·¸ì¸í•˜ì§€ ì•Šìœ¼ë©´ ì •ì§€ ìƒíƒœë¡œ ë³€ê²½ë©ë‹ˆë‹¤.`,severity:"error"}}return null},Z=()=>{var F,D;se(),L({title:"ë¡œê·¸ì¸ ì„±ê³µ",status:"success",duration:2e3,isClosable:!0}),n&&n();const j=((D=(F=X.state)==null?void 0:F.from)==null?void 0:D.pathname)||"/";Y(j)},oe=j=>_(null,null,function*(){var F,D,ee,ie,z,O,W,me,te,pe,ge,d,m;j.preventDefault(),c(!0);try{console.log("ğŸš€ ë¡œê·¸ì¸ ì‹œì‘:",{email:x});const{token:y,user:t}=yield pt(x,C);console.log("ğŸ” ë¡œê·¸ì¸ ì‘ë‹µ:",{token:y?"í† í° ìˆìŒ":"í† í° ì—†ìŒ",user:t==null?void 0:t.name}),console.log("ğŸ” í† í° ê¸¸ì´:",y?y.length:0),console.log("ğŸ” í† í° ë‚´ìš© (ì²˜ìŒ 50ì):",y?y.substring(0,50)+"...":"ì—†ìŒ"),console.log("ğŸ”„ ì‚¬ìš©ì ì •ë³´ ì €ì¥ ì¤‘..."),G(t),console.log("ğŸ”„ í† í° ì €ì¥ ì¤‘..."),U(y);const o=localStorage.getItem("token"),a=localStorage.getItem("user");console.log("ğŸ” í† í° ì €ì¥ í›„ localStorage í™•ì¸:",o?`ì €ì¥ë¨ (ê¸¸ì´: ${o.length})`:"ì €ì¥ ì•ˆë¨"),console.log("ğŸ” ì‚¬ìš©ì ì €ì¥ í›„ localStorage í™•ì¸:",a?"ì €ì¥ë¨":"ì €ì¥ ì•ˆë¨");const l=ae(t);if(l)h(l),re();else{L({title:"ë¡œê·¸ì¸ ì„±ê³µ",status:"success",duration:2e3,isClosable:!0}),n&&n();const f=((D=(F=X.state)==null?void 0:F.from)==null?void 0:D.pathname)||"/";Y(f)}}catch(y){let t="ì˜¤ë¥˜ ë°œìƒ";if(y&&typeof y=="object"&&"response"in y){const o=y;((ee=o.response)==null?void 0:ee.status)===401?t="ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.":((ie=o.response)==null?void 0:ie.status)===403?t="ë¹„í™œì„±í™”ëœ ê³„ì •ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.":((z=o.response)==null?void 0:z.status)===400?t=((O=o.response.data)==null?void 0:O.error)||((W=o.response.data)==null?void 0:W.message)||"ì…ë ¥ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.":((me=o.response)==null?void 0:me.status)===404?t="ë¡œê·¸ì¸ ì„œë¹„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.":((te=o.response)==null?void 0:te.status)===500?t="ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.":(ge=(pe=o.response)==null?void 0:pe.data)!=null&&ge.error?t=o.response.data.error:(m=(d=o.response)==null?void 0:d.data)!=null&&m.message&&(t=o.response.data.message)}else y&&typeof y=="object"&&"message"in y&&(t=y.message);L({title:"ë¡œê·¸ì¸ ì‹¤íŒ¨",description:t,status:"error",duration:5e3,isClosable:!0})}finally{c(!1)}});return e.jsxs(A,{bgGradient:"linear(to-br, #004ea8, #1f2937)",borderRadius:"xl",p:0,px:8,py:8,position:"relative",children:[i&&e.jsx(Fe,{color:"white",position:"absolute",top:"1rem",right:"1rem",zIndex:100,size:"lg",bg:"rgba(0,0,0,0.25)",_hover:{bg:"rgba(0,0,0,0.35)"},_focus:{boxShadow:"none"},borderRadius:"full",m:0,transform:"none",onClick:i}),e.jsxs(A,{bg:"white",borderRadius:"xl",p:8,boxShadow:"lg",w:"full",maxW:"sm",minW:320,children:[e.jsx(Ze,{mb:6,color:"#004ea8",fontFamily:"Pretendard, Inter, sans-serif",fontWeight:"bold",textAlign:"center",children:"ë¡œê·¸ì¸"}),e.jsx("form",{onSubmit:oe,children:e.jsxs(ce,{spacing:4,children:[e.jsxs(H,{id:"email",isRequired:!0,children:[e.jsx(q,{children:"ì´ë©”ì¼"}),e.jsx(Q,{type:"email",value:x,onChange:j=>s(j.target.value),placeholder:"ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”",rounded:"lg",bg:"gray.50",_dark:{bg:"#374151"}})]}),e.jsxs(H,{id:"password",isRequired:!0,children:[e.jsx(q,{children:"ë¹„ë°€ë²ˆí˜¸"}),e.jsxs(wt,{children:[e.jsx(Q,{type:w?"text":"password",value:C,onChange:j=>he(j.target.value),placeholder:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”",rounded:"lg",bg:"gray.50",_dark:{bg:"#374151"}}),e.jsx(yt,{children:e.jsx(Ae,{"aria-label":w?"ë¹„ë°€ë²ˆí˜¸ ìˆ¨ê¸°ê¸°":"ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°",icon:w?e.jsx(vt,{}):e.jsx(et,{}),variant:"ghost",size:"sm",bg:"#004ea8",color:"white",_hover:{bg:"#00397a"},onClick:()=>J(j=>!j)})})]})]}),e.jsx(k,{type:"submit",colorScheme:"blue",bg:"#004ea8",_hover:{bg:"#00397a"},w:"full",rounded:"lg",isLoading:r,fontWeight:"bold",children:"ë¡œê·¸ì¸"}),i&&e.jsx(k,{variant:"outline",color:"#004ea8",borderColor:"#004ea8",borderWidth:1,borderStyle:"solid",rounded:"lg",w:"full",mt:2,fontWeight:"bold",bg:"white",_hover:{bg:"#e6f0fa"},onClick:i,children:"íšŒì›ê°€ì…"})]})})]}),e.jsxs(ye,{isOpen:N,onClose:Z,size:"md",children:[e.jsx(ve,{}),e.jsxs(Se,{children:[e.jsx(ze,{children:(E==null?void 0:E.title)||"ìƒíƒœ ê²½ê³ "}),e.jsx(Ce,{children:e.jsxs(tt,{status:(E==null?void 0:E.severity)==="error"?"error":"warning",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",children:[e.jsx(ot,{boxSize:"40px",mr:0}),e.jsx(St,{mt:4,mb:1,fontSize:"lg",children:E==null?void 0:E.title}),e.jsx(Ct,{maxWidth:"sm",children:E==null?void 0:E.message})]})}),e.jsx(Et,{children:e.jsx(k,{colorScheme:"blue",mr:3,onClick:Z,children:"í™•ì¸"})})]})]})]})};function Lt(){var f,p,T,g,ne,Ee;const{isOpen:i,onOpen:n,onClose:x}=Me(),s=be(u=>u.user),C=be(u=>u.logout),he=be(u=>u.setUser),w=be(u=>u.token),[J,r]=b.useState(!1);(f=s==null?void 0:s.attendance)!=null,(p=s==null?void 0:s.voteAttendance)!=null;const c=He(),E=lt(),[h,G]=b.useState(!1),[U,L]=b.useState((s==null?void 0:s.name)||""),[Y,X]=b.useState(!1),[N,re]=b.useState(null),[se,ae]=b.useState(!1),[Z,oe]=b.useState(""),[j,F]=b.useState(""),[D,ee]=b.useState(!1),[ie,z]=b.useState(null),[O,W]=b.useState(!1),me=Re(),te=()=>_(null,null,function*(){var u,I;if(w)try{W(!0),console.log("ğŸ”„ í—¤ë”: ì‚¬ìš©ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì‹œì‘");const R=yield We(()=>import("./pages-D8utAuX0.js").then(P=>P.p),__vite__mapDeps([0,1,2,3,4])).then(P=>P.getApiBaseUrl()),S=yield fetch(`${R}/profile`,{method:"GET",headers:{Authorization:`Bearer ${w}`,"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!S.ok)throw new Error(`HTTP error! status: ${S.status}`);const V=yield S.json();console.log("ğŸ“Š í—¤ë”: í”„ë¡œí•„ API ì‘ë‹µ:",{voteDetails:V.voteDetails,voteAttendance:V.voteAttendance,participated:(u=V.voteDetails)==null?void 0:u.participated,total:(I=V.voteDetails)==null?void 0:I.total}),he(V),console.log("âœ… í—¤ë”: ì‚¬ìš©ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì™„ë£Œ:",{voteAttendance:V.voteAttendance,voteDetails:V.voteDetails,name:V.name})}catch(R){console.error("âŒ í—¤ë”: ì‚¬ìš©ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:",R)}finally{W(!1)}});b.useEffect(()=>{const u=()=>{console.log("ğŸ—³ï¸ í—¤ë”: íˆ¬í‘œ ì œì¶œ ì´ë²¤íŠ¸ ìˆ˜ì‹ , ì‚¬ìš©ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨"),te()},I=()=>{console.log("ğŸ”„ í—¤ë”: íˆ¬í‘œ ë°ì´í„° ë³€ê²½ ì´ë²¤íŠ¸ ìˆ˜ì‹ , ì‚¬ìš©ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨"),te()};return window.addEventListener("voteSubmitted",u),window.addEventListener("voteDataChanged",I),()=>{window.removeEventListener("voteSubmitted",u),window.removeEventListener("voteDataChanged",I)}},[w]);const pe=()=>{L((s==null?void 0:s.name)||""),G(!0)},ge=()=>_(null,null,function*(){if(!(!s||!w)){X(!0),re(null);try{const u=yield We(()=>import("./pages-D8utAuX0.js").then(I=>I.q),__vite__mapDeps([0,1,2,3,4])).then(I=>I.updateProfile(U));he(u.user),G(!1),me({title:"ì´ë¦„ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:2e3})}catch(u){re("ì´ë¦„ ìˆ˜ì • ì‹¤íŒ¨")}finally{X(!1)}}}),d=()=>_(null,null,function*(){if(!(!s||!w)){if(Z!==j){z("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");return}if(Z.length<6){z("ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");return}ee(!0),z(null);try{const{changePassword:u}=yield We(()=>_(null,null,function*(){const{changePassword:I}=yield import("./pages-D8utAuX0.js").then(R=>R.q);return{changePassword:I}}),__vite__mapDeps([0,1,2,3,4]));yield u(Z),ae(!1),oe(""),F(""),me({title:"ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:2e3})}catch(u){console.error("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì˜¤ë¥˜:",u),z("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{ee(!1)}}}),[m,y]=b.useState(0),[t,o]=b.useState(0),a=b.useRef(null),l=b.useRef(null);return b.useEffect(()=>{const u=s==null?void 0:s.gameDetails,I=u&&u.total>0?Math.round(u.participated/u.total*100):0;y(0);const R=700,S=1e3/60,V=Math.round(R/S);let P=0;return a.current&&clearInterval(a.current),a.current=setInterval(()=>{P++;const le=Math.min(P/V,1),Ne=Math.round(le*I);y(Ne),le===1&&a.current&&clearInterval(a.current)},S),()=>{a.current&&clearInterval(a.current)}},[s==null?void 0:s.gameDetails]),b.useEffect(()=>{const u=s==null?void 0:s.voteDetails,I=u&&u.total>0?Math.round(u.participated/u.total*100):0,R=700,S=1e3/60,V=Math.round(R/S);let P=0;return l.current&&clearInterval(l.current),l.current=setInterval(()=>{P++;const le=Math.min(P/V,1),Ne=Math.round(le*I);o(Ne),le===1&&l.current&&clearInterval(l.current)},S),()=>{l.current&&clearInterval(l.current)}},[s==null?void 0:s.voteDetails]),b.useEffect(()=>{const u="header-gauge-grow-keyframes";if(!document.getElementById(u)){const I=document.createElement("style");I.id=u,I.innerHTML="@keyframes gaugeGrow { from { width: 0%; } to { width: var(--gauge-width, 100%); } }",document.head.appendChild(I)}},[]),b.useEffect(()=>{w&&(console.log("ğŸš€ í—¤ë”: ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸, ì‚¬ìš©ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨"),te())},[w]),b.useEffect(()=>{if(w){console.log("ğŸ”„ í—¤ë”: í˜ì´ì§€ ë¡œë“œ ì‹œ ê°•ì œ ìƒˆë¡œê³ ì¹¨");const u=setTimeout(()=>{te()},500);return()=>clearTimeout(u)}},[]),b.useEffect(()=>{const u=()=>{console.log("ğŸ” í—¤ë”: íˆ¬í‘œ ì™„ë£Œ ì´ë²¤íŠ¸ ìˆ˜ì‹ , ì‚¬ìš©ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨"),s&&w&&te()};window.addEventListener("voteSubmitted",u);const I=()=>{console.log("ğŸ”” í—¤ë”: ê²½ê¸° ë³€ê²½ ì´ë²¤íŠ¸ ìˆ˜ì‹ , ì‚¬ìš©ì ë°ì´í„° ìƒˆë¡œê³ ì¹¨"),w&&te()};window.addEventListener("gamesChanged",I);const R=()=>I();return fe.on(xe.GAME_CREATED,R),fe.on(xe.GAME_UPDATED,R),fe.on(xe.GAME_DELETED,R),fe.on(xe.GAME_CONFIRMED,R),fe.on(xe.DATA_REFRESH_NEEDED,({payload:S})=>{(S==null?void 0:S.dataType)==="games"&&I()}),()=>{window.removeEventListener("voteSubmitted",u),window.removeEventListener("gamesChanged",I),fe.off(xe.GAME_CREATED,R),fe.off(xe.GAME_UPDATED,R),fe.off(xe.GAME_DELETED,R),fe.off(xe.GAME_CONFIRMED,R)}},[s,w]),e.jsxs(e.Fragment,{children:[e.jsxs(Be,{as:"nav",align:"center",justify:"space-between",px:{base:2,md:4,lg:6},py:2,bg:"white",boxShadow:"sm",w:"100%",position:"fixed",top:0,left:0,right:0,zIndex:100,maxW:"100vw",overflowX:"hidden",boxSizing:"border-box",children:[e.jsx($,{spacing:4,flexShrink:1,minW:0,pl:{base:4,md:6,lg:8},children:e.jsx(v,{fontSize:"xl",fontWeight:"bold",cursor:"pointer",onClick:u=>{u.preventDefault(),u.stopPropagation(),console.log("ğŸ” í™ˆìœ¼ë¡œ ì´ë™ ì‹œë„ - í˜„ì¬ ê²½ë¡œ:",window.location.pathname),console.log("ğŸ” navigate í•¨ìˆ˜ íƒ€ì…:",typeof c);try{c("/"),console.log("ğŸ” í™ˆ navigate í˜¸ì¶œ ì™„ë£Œ"),setTimeout(()=>{window.location.pathname!=="/"&&(console.log("ğŸ” React Router ì‹¤íŒ¨, ê°•ì œ ì´ë™ ì‹œë„"),window.location.href="/")},500)}catch(I){console.error("ğŸ” í™ˆ navigate ì—ëŸ¬:",I),window.location.href="/"}},tabIndex:0,"aria-label":"í™ˆìœ¼ë¡œ ì´ë™",color:"#004ea8",_hover:{color:"#00397a"},whiteSpace:"nowrap",children:"FC CHAL-GGYEO"})}),e.jsxs($,{spacing:2,flexShrink:1,minW:0,children:[e.jsx(k,{variant:E.pathname==="/schedule-v2"?"outline":"ghost",bg:"transparent",color:"#004ea8",border:"0.5px solid",borderColor:E.pathname==="/schedule-v2"?"#004ea8":"transparent",_hover:{bg:E.pathname==="/schedule-v2"?"transparent":"gray.50",borderColor:"#004ea8"},leftIcon:e.jsx(nt,{}),onClick:()=>c("/schedule-v2"),flexShrink:1,children:"ì¼ì •"}),e.jsx(k,{variant:E.pathname==="/gallery/photos"?"outline":"ghost",bg:"transparent",color:"#004ea8",border:"0.5px solid",borderColor:E.pathname==="/gallery/photos"?"#004ea8":"transparent",_hover:{bg:E.pathname==="/gallery/photos"?"transparent":"gray.50",borderColor:"#004ea8"},leftIcon:e.jsx(It,{}),onClick:()=>c("/gallery/photos"),flexShrink:1,children:"ì‚¬ì§„"}),e.jsx(k,{variant:E.pathname==="/gallery/videos"?"outline":"ghost",bg:"transparent",color:"#004ea8",border:"0.5px solid",borderColor:E.pathname==="/gallery/videos"?"#004ea8":"transparent",_hover:{bg:E.pathname==="/gallery/videos"?"transparent":"gray.50",borderColor:"#004ea8"},leftIcon:e.jsx(At,{}),onClick:()=>c("/gallery/videos"),flexShrink:1,children:"ë™ì˜ìƒ"}),((s==null?void 0:s.role)==="ADMIN"||(s==null?void 0:s.email)==="sti60val@gmail.com")&&e.jsx(k,{variant:E.pathname==="/admin"?"outline":"ghost",bg:"transparent",color:"#004ea8",border:"0.5px solid",borderColor:E.pathname==="/admin"?"#004ea8":"transparent",_hover:{bg:E.pathname==="/admin"?"transparent":"gray.50",borderColor:"#004ea8"},leftIcon:e.jsx(Dt,{}),onClick:u=>{u.preventDefault(),u.stopPropagation(),console.log("ğŸ” ê´€ë¦¬ìë¡œ ì´ë™ ì‹œë„ - í˜„ì¬ ê²½ë¡œ:",window.location.pathname),console.log("ğŸ” navigate í•¨ìˆ˜ íƒ€ì…:",typeof c);try{c("/admin"),console.log("ğŸ” ê´€ë¦¬ì navigate í˜¸ì¶œ ì™„ë£Œ"),setTimeout(()=>{window.location.pathname!=="/admin"&&(console.log("ğŸ” React Router ì‹¤íŒ¨, ê°•ì œ ì´ë™ ì‹œë„"),window.location.href="/admin")},500)}catch(I){console.error("ğŸ” ê´€ë¦¬ì navigate ì—ëŸ¬:",I),window.location.href="/admin"}},children:"ê´€ë¦¬ì"})]}),e.jsx($,{spacing:2,flexShrink:0,minW:"fit-content",pr:{base:4,md:6,lg:8},children:s?e.jsxs(e.Fragment,{children:[e.jsxs($,{align:"center",spacing:2,flexShrink:1,minW:0,children:[s&&e.jsxs(e.Fragment,{children:[e.jsx(De,{label:O?"ë¡œë”© ì¤‘...":`${((T=s==null?void 0:s.voteDetails)==null?void 0:T.participated)||0}/${((g=s==null?void 0:s.voteDetails)==null?void 0:g.total)||0} íˆ¬í‘œì°¸ì—¬`,placement:"bottom",hasArrow:!0,bg:"gray.800",color:"white",fontSize:"sm",children:e.jsxs(A,{minW:{base:"60px",md:"70px"},textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexShrink:1,children:[e.jsxs(v,{fontSize:"xs",color:"gray.500",cursor:"default",_hover:{color:"blue.400"},whiteSpace:"nowrap",children:["íˆ¬í‘œìœ¨ ",e.jsx("span",{style:{color:"#004ea8",fontWeight:"bold"},children:O?"...":`${t}%`})]}),e.jsx(A,{w:"60px",mt:.5,children:e.jsx(A,{h:"6px",bg:"#e2e8f0",borderRadius:4,overflow:"hidden",position:"relative",children:e.jsx(A,{bg:"#e53e3e",h:"100%",borderRadius:4,position:"absolute",left:0,top:0,zIndex:1,style:{width:`${t}%`,animation:"gaugeGrow 0.7s cubic-bezier(.4,2,.6,1)",animationFillMode:"forwards","--gauge-width":`${t}%`,transition:"width 0.7s cubic-bezier(.4,2,.6,1)"}})})})]})}),e.jsx(De,{label:`${((ne=s==null?void 0:s.gameDetails)==null?void 0:ne.participated)||0}/${((Ee=s==null?void 0:s.gameDetails)==null?void 0:Ee.total)||0} ê²½ê¸° ì°¸ì—¬`,placement:"bottom",hasArrow:!0,bg:"gray.800",color:"white",fontSize:"sm",children:e.jsxs(A,{minW:{base:"60px",md:"70px"},textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexShrink:1,children:[e.jsxs(v,{fontSize:"xs",color:"gray.500",cursor:"default",_hover:{color:"blue.400"},whiteSpace:"nowrap",children:["ì°¸ì—¬ìœ¨ ",e.jsxs("span",{style:{color:"#004ea8",fontWeight:"bold"},children:[m,"%"]})]}),e.jsx(A,{w:"60px",mt:.5,children:e.jsx(A,{h:"6px",bg:"#e2e8f0",borderRadius:4,overflow:"hidden",position:"relative",children:e.jsx(A,{bg:"#004ea8",h:"100%",borderRadius:4,position:"absolute",left:0,top:0,zIndex:1,style:{width:`${m}%`,animation:"gaugeGrow 0.7s cubic-bezier(.4,2,.6,1)",animationFillMode:"forwards","--gauge-width":`${m}%`,transition:"width 0.7s cubic-bezier(.4,2,.6,1)"}})})})]})})]}),e.jsxs($,{align:"center",spacing:2,flexShrink:0,children:[e.jsx(we,{bg:"#004ea8",color:"white",borderRadius:"full",px:2,py:1,whiteSpace:"nowrap",children:"ì •"}),e.jsx(v,{fontWeight:"bold",cursor:"pointer",_hover:{textDecoration:"underline",color:"#00397a"},onClick:pe,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxW:{base:"60px",md:"100px"},children:s.name})]})]}),e.jsx(k,{size:"sm",bg:"#004ea8",color:"white",_hover:{bg:"#00397a"},onClick:()=>{C(),c("/")},whiteSpace:"nowrap",children:"ë¡œê·¸ì•„ì›ƒ"})]}):e.jsx(k,{size:"sm",bg:"#004ea8",color:"white",_hover:{bg:"#00397a"},variant:"outline",onClick:n,whiteSpace:"nowrap",children:"ë¡œê·¸ì¸"})})]}),e.jsxs(ye,{isOpen:i,onClose:()=>{r(!1),x()},isCentered:!0,size:"sm",children:[e.jsx(ve,{}),e.jsx(Se,{p:0,borderRadius:"lg",minH:"auto",maxH:"400px",height:"auto",mx:"auto",my:"auto",position:"relative",children:e.jsx(Ce,{p:0,pt:0,pb:1,px:0,display:"flex",alignItems:"center",justifyContent:"center",height:"400px",minHeight:"400px",children:J?e.jsx(Mt,{onSwitch:()=>r(!1),onClose:()=>{r(!1),x()}}):e.jsx(Nt,{onSwitch:()=>r(!0),onClose:()=>{r(!1),x()}})})})]}),e.jsxs(ye,{isOpen:h,onClose:()=>G(!1),isCentered:!0,size:"sm",children:[e.jsx(ve,{}),e.jsx(Se,{children:e.jsxs(Ce,{p:6,children:[e.jsxs(H,{mb:4,children:[e.jsx(q,{children:"ìƒˆ ì´ë¦„"}),e.jsx(Q,{value:U,onChange:u=>L(u.target.value),placeholder:"ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),N&&e.jsx(v,{color:"red.500",mb:2,children:N}),e.jsx(k,{bg:"#004ea8",color:"white",_hover:{bg:"#00397a"},w:"full",onClick:ge,isLoading:Y,isDisabled:!U.trim()||U===(s==null?void 0:s.name),mb:3,children:"ì €ì¥"}),e.jsx(k,{variant:"outline",colorScheme:"orange",w:"full",onClick:()=>{G(!1),ae(!0)},children:"ë¹„ë°€ë²ˆí˜¸ ë³€ê²½"})]})})]}),e.jsxs(ye,{isOpen:se,onClose:()=>ae(!1),isCentered:!0,size:"sm",children:[e.jsx(ve,{}),e.jsx(Se,{children:e.jsxs(Ce,{p:6,children:[e.jsxs(H,{mb:4,children:[e.jsx(q,{children:"ìƒˆ ë¹„ë°€ë²ˆí˜¸"}),e.jsx(Q,{type:"password",value:Z,onChange:u=>oe(u.target.value),placeholder:"ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs(H,{mb:4,children:[e.jsx(q,{children:"ë¹„ë°€ë²ˆí˜¸ í™•ì¸"}),e.jsx(Q,{type:"password",value:j,onChange:u=>F(u.target.value),placeholder:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"})]}),ie&&e.jsx(v,{color:"red.500",mb:2,children:ie}),e.jsx(k,{bg:"#004ea8",color:"white",_hover:{bg:"#00397a"},w:"full",onClick:d,isLoading:D,isDisabled:!Z.trim()||!j.trim(),children:"ë¹„ë°€ë²ˆí˜¸ ë³€ê²½"})]})})]})]})}function Ot({userList:i,onUserListChange:n}){const[x,s]=b.useState([]),[C,he]=b.useState(""),[w,J]=b.useState(null),[r,c]=b.useState(null),[E,h]=b.useState(null),[G,U]=b.useState(!1),{isOpen:L,onOpen:Y,onClose:X}=Me(),{isOpen:N,onOpen:re,onClose:se}=Me(),{isOpen:ae,onOpen:Z,onClose:oe}=Me(),j=Re(),F=Ke("white","gray.800"),D=Ke("gray.200","gray.700"),{user:ee,setUser:ie}=be();je.useEffect(()=>{L&&E&&!r&&(console.log("ì›ë³¸ ë°ì´í„° ë³µì›:",E),c(E)),r&&!L&&console.log("editingMember ìƒíƒœ ìœ ì§€:",r)},[r,L,E]),je.useEffect(()=>{if(C.trim()==="")s(i);else{const d=i.filter(m=>{var y,t,o;return((y=m.name)==null?void 0:y.toLowerCase().includes(C.toLowerCase()))||((t=m.email)==null?void 0:t.toLowerCase().includes(C.toLowerCase()))||((o=m.role)==null?void 0:o.toLowerCase().includes(C.toLowerCase()))});s(d)}},[C,i]);const z=d=>{console.log("ìˆ˜ì •í•  íšŒì› ì •ë³´:",d);const m={id:d.id,name:d.name||"",email:d.email||"",role:d.role||"MEMBER",status:d.status||"ACTIVE",createdAt:d.createdAt};h(m),c({id:d.id,name:d.name||"",email:d.email||"",role:d.role||"MEMBER",status:d.status||"ACTIVE",createdAt:d.createdAt}),Y()},O=()=>_(null,null,function*(){if(r)try{if(r.id===0){if(!r.email||!r.email.trim()){j({title:"ì´ë©”ì¼ ì£¼ì†Œ í•„ìš”",description:"ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",status:"error",duration:3e3,isClosable:!0});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){j({title:"ì´ë©”ì¼ í˜•ì‹ ì˜¤ë¥˜",description:"ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.",status:"error",duration:3e3,isClosable:!0});return}try{const m=yield fetch(`${Ye.BASE_URL}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name,email:r.email,password:"password123",role:r.role})});if(!m.ok){const t=yield m.json();throw new Error(t.error||"íšŒì› ì¶”ê°€ ì‹¤íŒ¨")}const y=yield m.json();j({title:"íšŒì› ì¶”ê°€ ì™„ë£Œ",description:"ìƒˆ íšŒì›ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:2e3,isClosable:!0}),X(),c(null),h(null);try{const t={id:y.id||Date.now(),name:r.name,email:r.email,role:r.role,status:"ACTIVE",createdAt:new Date().toISOString()},o=[...i,t];n(o),ft(t),Qe("members"),Xe(`ìƒˆ íšŒì› "${t.name}"ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`,"success"),console.log("íšŒì› ëª©ë¡ ì—…ë°ì´íŠ¸ ì™„ë£Œ:",o.length,"ëª…")}catch(t){console.error("íšŒì› ëª©ë¡ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:",t),window.location.reload()}}catch(m){const y=m instanceof Error?m.message:"íšŒì› ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";j({title:"íšŒì› ì¶”ê°€ ì‹¤íŒ¨",description:y,status:"error",duration:3e3,isClosable:!0})}}else{console.log("íšŒì› ì •ë³´ ìˆ˜ì • API í˜¸ì¶œ:",r.id,{name:r.name,email:r.email,role:r.role||"MEMBER",status:r.status||"ACTIVE"});const d=localStorage.getItem("token");if(!d){j({title:"ì¸ì¦ ì˜¤ë¥˜",description:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.",status:"error",duration:3e3,isClosable:!0});return}console.log("í† í° í™•ì¸:",d),console.log("í† í° ê¸¸ì´:",d.length);try{const m=yield fetch(`${Ye.BASE_URL}/members/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({name:r.name,email:r.email,role:r.role||"MEMBER",status:r.status||"ACTIVE"})});if(!m.ok){const o=yield m.json();throw new Error(o.error||"íšŒì› ì •ë³´ ìˆ˜ì • ì‹¤íŒ¨")}const y=yield m.json();console.log("API ì‘ë‹µ:",y);const t=i.map(o=>o.id===r.id?M(M({},r),y.member):o);n(t),ee&&ee.id===r.id&&ie(B(M({},ee),{name:r.name,email:r.email,role:r.role||"MEMBER",status:r.status||"ACTIVE"})),j({title:"íšŒì› ì •ë³´ ìˆ˜ì • ì™„ë£Œ",description:"íšŒì› ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:3e3,isClosable:!0}),X(),c(null),h(null);try{window.dispatchEvent(new CustomEvent("membersChanged"))}catch(o){}}catch(m){console.error("íšŒì› ì •ë³´ ìˆ˜ì • API ì˜¤ë¥˜:",m);const y=m instanceof Error?m.message:"íšŒì› ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";j({title:"íšŒì› ì •ë³´ ìˆ˜ì • ì‹¤íŒ¨",description:y,status:"error",duration:3e3,isClosable:!0})}}}catch(d){console.error("íšŒì› ì •ë³´ ì €ì¥ ì˜¤ë¥˜:",d),j({title:"íšŒì› ì •ë³´ ì €ì¥ ì‹¤íŒ¨",description:"íšŒì› ì •ë³´ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",status:"error",duration:3e3,isClosable:!0})}}),W=d=>_(null,null,function*(){if(!d)return;if(!localStorage.getItem("token")){j({title:"ì¸ì¦ ì˜¤ë¥˜",description:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.",status:"error",duration:3e3,isClosable:!0});return}U(!0);try{const y=yield xt(d);j({title:"ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™” ì™„ë£Œ",description:`ìƒˆ ë¹„ë°€ë²ˆí˜¸: ${y.newPassword}`,status:"success",duration:5e3,isClosable:!0})}catch(y){console.error("ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™” ì˜¤ë¥˜:",y),j({title:"ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™” ì‹¤íŒ¨",description:"ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",status:"error",duration:3e3,isClosable:!0})}finally{U(!1)}}),me=()=>_(null,null,function*(){if(!w)return;if(!localStorage.getItem("token")){j({title:"ì¸ì¦ ì˜¤ë¥˜",description:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.",status:"error",duration:3e3,isClosable:!0});return}try{yield bt(w.id);const m=i.filter(y=>y.id!==w.id);n(m),j({title:"íšŒì› ì‚­ì œ ì™„ë£Œ",description:"íšŒì›ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:3e3,isClosable:!0}),oe(),J(null);try{window.dispatchEvent(new CustomEvent("membersChanged"))}catch(y){}}catch(m){console.error("íšŒì› ì‚­ì œ ì˜¤ë¥˜:",m),j({title:"íšŒì› ì‚­ì œ ì‹¤íŒ¨",description:"íšŒì› ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",status:"error",duration:3e3,isClosable:!0})}}),te=d=>{switch(d){case"ACTIVE":return"green";case"INACTIVE":return"yellow";case"SUSPENDED":return"red";case"DELETED":return"gray";default:return"gray"}},pe=d=>{switch(d){case"SUPER_ADMIN":return"red";case"ADMIN":return"blue";case"MEMBER":return"green";default:return"gray"}},ge=d=>{switch(d){case"SUPER_ADMIN":return"ìŠˆí¼ê´€ë¦¬ì";case"ADMIN":return"ê´€ë¦¬ì";case"MEMBER":return"íšŒì›";default:return"ì•Œ ìˆ˜ ì—†ìŒ"}};return e.jsxs(A,{children:[e.jsxs(ce,{spacing:6,align:"stretch",children:[e.jsxs($,{justify:"space-between",children:[e.jsxs(ce,{align:"start",spacing:2,children:[e.jsxs($,{spacing:3,children:[e.jsx(v,{fontSize:"2xl",children:"ğŸ‘¥"}),e.jsx(v,{fontSize:"2xl",fontWeight:"bold",children:"íšŒì› ê´€ë¦¬"})]}),e.jsx(v,{children:"ì „ì²´ íšŒì› ì •ë³´ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}),e.jsx(k,{leftIcon:e.jsx(_e,{}),colorScheme:"blue",bg:"#004ea8",_hover:{bg:"#003d7a"},onClick:()=>{c({id:0,name:"",email:"",role:"MEMBER",status:"ACTIVE"}),Y()},size:"sm",children:"ì¶”ê°€"})]}),e.jsx(A,{bg:F,border:"1px",borderColor:D,borderRadius:"lg",overflow:"hidden",children:e.jsxs(rt,{variant:"simple",size:"sm",children:[e.jsx(st,{children:e.jsxs(Pe,{children:[e.jsx(de,{textAlign:"center",children:"ì´ë¦„"}),e.jsx(de,{textAlign:"center",children:"ì´ë©”ì¼"}),e.jsx(de,{textAlign:"center",children:"ë“±ê¸‰"}),e.jsx(de,{textAlign:"center",children:"ìƒíƒœ"}),e.jsx(de,{textAlign:"center",children:"ê°€ì…ì¼"}),e.jsx(de,{textAlign:"center",children:"ì‘ì—…"})]})}),e.jsx(at,{children:x.map(d=>e.jsxs(Pe,{children:[e.jsx(ue,{textAlign:"center",children:e.jsx(v,{fontWeight:"medium",children:d.name})}),e.jsx(ue,{textAlign:"center",children:e.jsx(v,{fontSize:"sm",color:"gray.600",children:d.email||"-"})}),e.jsx(ue,{textAlign:"center",children:e.jsx(we,{colorScheme:pe(d.role||""),variant:"subtle",children:ge(d.role||"")})}),e.jsx(ue,{textAlign:"center",children:e.jsx(we,{colorScheme:te(d.status||""),variant:"subtle",children:d.status==="ACTIVE"?"í™œì„±":d.status==="INACTIVE"?"ë¹„í™œì„±":d.status==="SUSPENDED"?"ì •ì§€":d.status==="DELETED"?"ì‚­ì œë¨":"ì•Œ ìˆ˜ ì—†ìŒ"})}),e.jsx(ue,{textAlign:"center",children:e.jsx(v,{fontSize:"sm",color:"gray.600",children:d.createdAt?new Date(d.createdAt).toLocaleDateString("ko-KR"):"-"})}),e.jsx(ue,{textAlign:"center",children:e.jsxs($,{spacing:2,justify:"center",children:[e.jsx(De,{label:"íšŒì› ì •ë³´ ë³´ê¸°",placement:"top",hasArrow:!0,bg:"gray.700",color:"white",fontSize:"sm",children:e.jsx(Ae,{"aria-label":"íšŒì› ì •ë³´ ë³´ê¸°",icon:e.jsx(et,{}),size:"sm",bg:"#004ea8",color:"white",_hover:{bg:"#003d7a"},onClick:()=>{J(d),re()}})}),e.jsx(De,{label:"íšŒì› ì •ë³´ ìˆ˜ì •",placement:"top",hasArrow:!0,bg:"gray.700",color:"white",fontSize:"sm",children:e.jsx(Ae,{"aria-label":"íšŒì› ì •ë³´ ìˆ˜ì •",icon:e.jsx(it,{}),size:"sm",bg:"#004ea8",color:"white",_hover:{bg:"#003d7a"},onClick:()=>z(d)})}),e.jsx(De,{label:"íšŒì› ì‚­ì œ",placement:"top",hasArrow:!0,bg:"red.600",color:"white",fontSize:"sm",children:e.jsx(Ae,{"aria-label":"íšŒì› ì‚­ì œ",icon:e.jsx(Ue,{}),size:"sm",bg:"#004ea8",color:"white",_hover:{bg:"#003d7a"},onClick:()=>{J(d),Z()}})})]})})]},d.id))})]})})]}),e.jsxs(ye,{isOpen:L,onClose:()=>{X()},size:"lg",children:[e.jsx(ve,{}),e.jsxs(Se,{children:[e.jsx(ze,{children:(r==null?void 0:r.id)===0?"ìƒˆ íšŒì› ì¶”ê°€":"íšŒì› ì •ë³´ ìˆ˜ì •"}),e.jsx(Ce,{children:e.jsxs(ce,{spacing:4,children:[e.jsxs(H,{children:[e.jsx(q,{children:"ì´ë¦„"}),e.jsx(Q,{value:(r==null?void 0:r.name)||"",onChange:d=>c(m=>m?B(M({},m),{name:d.target.value}):null),placeholder:"íšŒì› ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs(H,{children:[e.jsx(q,{children:"ì´ë©”ì¼"}),e.jsx(Q,{value:(r==null?void 0:r.email)||"",onChange:d=>c(m=>m?B(M({},m),{email:d.target.value}):null),placeholder:"ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”",type:"email"})]}),e.jsxs(H,{children:[e.jsx(q,{children:"ë“±ê¸‰"}),e.jsxs($e,{value:(r==null?void 0:r.role)||"MEMBER",onChange:d=>c(m=>m?B(M({},m),{role:d.target.value}):null),children:[e.jsx("option",{value:"MEMBER",children:"íšŒì›"}),e.jsx("option",{value:"ADMIN",children:"ê´€ë¦¬ì"}),e.jsx("option",{value:"SUPER_ADMIN",children:"ìŠˆí¼ê´€ë¦¬ì"})]})]}),e.jsxs(H,{children:[e.jsx(q,{children:"ìƒíƒœ"}),e.jsxs($e,{value:(r==null?void 0:r.status)||"ACTIVE",onChange:d=>c(m=>m?B(M({},m),{status:d.target.value}):null),children:[e.jsx("option",{value:"ACTIVE",children:"í™œì„±"}),e.jsx("option",{value:"INACTIVE",children:"ë¹„í™œì„±"}),e.jsx("option",{value:"SUSPENDED",children:"ì •ì§€"}),e.jsx("option",{value:"DELETED",children:"ì‚­ì œë¨"})]})]}),(r==null?void 0:r.id)!==0&&e.jsxs(H,{children:[e.jsx(q,{children:"ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬"}),e.jsx(k,{leftIcon:e.jsx(kt,{}),colorScheme:"orange",variant:"outline",onClick:()=>W(r.id),isLoading:G,loadingText:"ì´ˆê¸°í™” ì¤‘...",w:"100%",children:"ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”"}),e.jsx(v,{fontSize:"sm",color:"gray.500",mt:1,children:"ì´ˆê¸°í™”ëœ ë¹„ë°€ë²ˆí˜¸ëŠ” í† ìŠ¤íŠ¸ ë©”ì‹œì§€ë¡œ í‘œì‹œë©ë‹ˆë‹¤."})]})]})}),e.jsx(A,{p:6,borderTop:"1px",borderColor:"gray.200",children:e.jsxs($,{spacing:3,justify:"flex-end",children:[e.jsx(k,{variant:"ghost",onClick:()=>{X()},children:"ì·¨ì†Œ"}),e.jsx(k,{colorScheme:"blue",onClick:O,children:"ì €ì¥"})]})})]})]}),e.jsxs(ye,{isOpen:N,onClose:se,size:"lg",children:[e.jsx(ve,{}),e.jsxs(Se,{children:[e.jsx(ze,{children:"íšŒì› ì •ë³´"}),e.jsx(Ce,{children:w&&e.jsxs(ce,{spacing:4,align:"stretch",children:[e.jsxs(A,{children:[e.jsx(v,{fontWeight:"bold",mb:2,children:"ì´ë¦„"}),e.jsx(v,{children:w.name})]}),e.jsxs(A,{children:[e.jsx(v,{fontWeight:"bold",mb:2,children:"ì´ë©”ì¼"}),e.jsx(v,{children:w.email})]}),e.jsxs(A,{children:[e.jsx(v,{fontWeight:"bold",mb:2,children:"ë“±ê¸‰"}),e.jsx(we,{colorScheme:pe(w.role||""),variant:"subtle",children:ge(w.role||"")})]}),e.jsxs(A,{children:[e.jsx(v,{fontWeight:"bold",mb:2,children:"ìƒíƒœ"}),e.jsx(we,{colorScheme:te(w.status||""),variant:"subtle",children:w.status==="ACTIVE"?"í™œì„±":w.status==="INACTIVE"?"ë¹„í™œì„±":w.status==="SUSPENDED"?"ì •ì§€":w.status==="DELETED"?"ì‚­ì œë¨":"ì•Œ ìˆ˜ ì—†ìŒ"})]}),e.jsxs(A,{children:[e.jsx(v,{fontWeight:"bold",mb:2,children:"ê°€ì…ì¼"}),e.jsx(v,{children:w.createdAt?new Date(w.createdAt).toLocaleDateString("ko-KR"):"-"})]})]})}),e.jsx(A,{p:6,borderTop:"1px",borderColor:"gray.200",children:e.jsx($,{spacing:3,justify:"flex-end",children:e.jsx(k,{onClick:se,children:"ë‹«ê¸°"})})})]})]}),e.jsxs(ye,{isOpen:ae,onClose:oe,children:[e.jsx(ve,{}),e.jsxs(Se,{children:[e.jsx(ze,{children:"íšŒì› ì‚­ì œ í™•ì¸"}),e.jsx(Ce,{children:e.jsxs(tt,{status:"warning",children:[e.jsx(ot,{}),e.jsxs(v,{children:[e.jsx("strong",{children:w==null?void 0:w.name})," íšŒì›ì„ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."]})]})}),e.jsx(A,{p:6,borderTop:"1px",borderColor:"gray.200",children:e.jsxs($,{spacing:3,justify:"flex-end",children:[e.jsx(k,{variant:"ghost",onClick:oe,children:"ì·¨ì†Œ"}),e.jsx(k,{colorScheme:"red",onClick:me,children:"ì‚­ì œ"})]})})]})]})]})}const Ve={};class Gt{constructor(){Oe(this,"registration",null);Oe(this,"isSupported",!1);this.isSupported="Notification"in window&&"serviceWorker"in navigator}isNotificationSupported(){return this.isSupported}requestPermission(){return _(this,null,function*(){if(!this.isSupported)throw new Error("í‘¸ì‹œ ì•Œë¦¼ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.");const n=yield Notification.requestPermission();return console.log("ì•Œë¦¼ ê¶Œí•œ:",n),n})}registerServiceWorker(){return _(this,null,function*(){const n=(Ve==null?void 0:Ve.VITE_ENABLE_PUSH)==="true";if(!this.isSupported||!n)throw new Error("ì„œë¹„ìŠ¤ ì›Œì»¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.");try{return this.registration=yield navigator.serviceWorker.register("/sw.js"),console.log("âœ… ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì„±ê³µ:",this.registration),this.registration}catch(x){throw console.error("âŒ ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì‹¤íŒ¨:",x),x}})}showNotification(n){return _(this,null,function*(){if(!this.isSupported){console.warn("í‘¸ì‹œ ì•Œë¦¼ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.");return}if(Notification.permission!=="granted"){console.warn("ì•Œë¦¼ ê¶Œí•œì´ í—ˆìš©ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");return}try{this.registration?yield this.registration.showNotification(n.title,{body:n.body,icon:n.icon||"/vite.svg",badge:n.badge||"/vite.svg",tag:n.tag,data:n.data,actions:n.actions,requireInteraction:!0,silent:!1}):new Notification(n.title,{body:n.body,icon:n.icon||"/vite.svg",tag:n.tag,data:n.data}),console.log("âœ… í‘¸ì‹œ ì•Œë¦¼ í‘œì‹œ ì„±ê³µ:",n.title)}catch(x){console.error("âŒ í‘¸ì‹œ ì•Œë¦¼ í‘œì‹œ ì‹¤íŒ¨:",x)}})}showGameConfirmationNotification(n){return _(this,null,function*(){yield this.showNotification({title:"ğŸ† ê²½ê¸° ì¼ì • í™•ì •",body:`${n.gameDate} ${n.gameTime} - ${n.gameLocation}`,tag:"game-confirmation",data:M({type:"game_confirmation"},n),actions:[{action:"view",title:"ì¼ì • ë³´ê¸°",icon:"/vite.svg"},{action:"dismiss",title:"ë‹«ê¸°"}]})})}showVoteReminderNotification(n){return _(this,null,function*(){yield this.showNotification({title:"ğŸ—³ï¸ ì¼ì • íˆ¬í‘œ",body:`${n.votePeriod} íˆ¬í‘œê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤`,tag:"vote-reminder",data:M({type:"vote_reminder"},n),actions:[{action:"vote",title:"íˆ¬í‘œí•˜ê¸°",icon:"/vite.svg"},{action:"dismiss",title:"ë‹«ê¸°"}]})})}showNewMemberNotification(n){return _(this,null,function*(){yield this.showNotification({title:"ğŸ‘‹ ì‹ ê·œ íšŒì› ê°€ì…",body:`${n.memberName}ë‹˜ì´ íŒ€ì— ê°€ì…í–ˆìŠµë‹ˆë‹¤`,tag:"new-member",data:M({type:"new_member"},n),actions:[{action:"view",title:"íŒ€ ë³´ê¸°",icon:"/vite.svg"},{action:"dismiss",title:"ë‹«ê¸°"}]})})}showGameReminderNotification(n){return _(this,null,function*(){yield this.showNotification({title:`âš½ ê²½ê¸° ${n.hoursBefore}ì‹œê°„ ì „`,body:`${n.gameDate} ${n.gameTime} - ${n.gameLocation}`,tag:"game-reminder",data:M({type:"game_reminder"},n),actions:[{action:"view",title:"ê²½ê¸° ì •ë³´",icon:"/vite.svg"},{action:"dismiss",title:"ë‹«ê¸°"}]})})}setupNotificationClickHandler(){this.registration&&this.registration.addEventListener("notificationclick",n=>{console.log("ì•Œë¦¼ í´ë¦­:",n);const x=n.notification,s=n.action,C=x.data;x.close(),s!=="dismiss"&&C!=null&&C.type&&this.handleNotificationAction(C.type,C,s)})}handleNotificationAction(n,x,s){const C=window.location.origin;switch(n){case"game_confirmation":case"game_reminder":window.open(`${C}/schedule`,"_blank");break;case"vote_reminder":s==="vote"?window.open(`${C}/schedule`,"_blank"):window.open(`${C}/`,"_blank");break;case"new_member":window.open(`${C}/admin`,"_blank");break;default:window.open(`${C}/`,"_blank")}}getPermissionStatus(){return Notification.permission}initialize(){return _(this,null,function*(){try{return this.isSupported?(yield this.registerServiceWorker(),this.setupNotificationClickHandler(),console.log("âœ… í‘¸ì‹œ ì•Œë¦¼ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ"),!0):(console.warn("í‘¸ì‹œ ì•Œë¦¼ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤."),!1)}catch(n){return console.error("âŒ í‘¸ì‹œ ì•Œë¦¼ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹¤íŒ¨:",n),!1}})}}const qe=new Gt,zt=i=>qe.showGameConfirmationNotification(i),Wt=()=>qe.initialize(),Vt=()=>qe.isNotificationSupported();function Bt({games:i,onGamesChange:n,userList:x,onGameDataChanged:s}){console.log("=== GameManagement ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ==="),console.log("GameManagement - ë°›ì€ games prop:",i),console.log("GameManagement - games ê¸¸ì´:",i==null?void 0:i.length),console.log("GameManagement - games íƒ€ì…:",typeof i),console.log("GameManagement - gamesê°€ ë°°ì—´ì¸ê°€:",Array.isArray(i)),console.log("GameManagement - games ë‚´ìš©:",JSON.stringify(i,null,2));const C="#004ea8",he=je.useMemo(()=>{if(!i||!Array.isArray(i))return[];console.log("ğŸ” GameManagement í•„í„°ë§ ì‹œì‘:",{totalGames:i.length,games:i.map(p=>({id:p.id,date:p.date,autoGenerated:p.autoGenerated,confirmed:p.confirmed}))});const t=i.filter(p=>!p.autoGenerated),o=i.filter(p=>p.autoGenerated);console.log("ğŸ” ê²Œì„ ë¶„ë¥˜:",{confirmed:t.length,autoGenerated:o.length,confirmedGames:t.map(p=>({id:p.id,date:p.date})),autoGeneratedGames:o.map(p=>({id:p.id,date:p.date}))});const a=new Set(t.map(p=>{if(!p.date||typeof p.date!="string")return null;const T=p.date.match(/(\d{4})\.(\d{2})\.(\d{2})/);return T?`${T[1]}.${T[2]}.${T[3]}`:null}).filter(Boolean));console.log("ğŸ” í™•ì •ì¼ì • ë‚ ì§œë“¤:",Array.from(a));const l=o;console.log("âš ï¸ ìë™ìƒì„±ì¼ì • í•„í„°ë§ ë¹„í™œì„±í™”ë¨ - ëª¨ë“  ìë™ìƒì„±ì¼ì • í‘œì‹œ");const f=[...t,...l];return console.log("ğŸ” ìµœì¢… í•„í„°ë§ ê²°ê³¼:",{original:i.length,confirmed:t.length,autoGenerated:o.length,filteredAutoGenerated:l.length,final:f.length,finalGames:f.map(p=>({id:p.id,date:p.date,autoGenerated:p.autoGenerated}))}),f},[i]),{isOpen:w,onOpen:J,onClose:r}=Me(),[c,E]=b.useState(null),[h,G]=b.useState({date:"",time:"",location:"",eventType:"ìì²´",mercenaryCount:0,memberNames:[""]}),[U,L]=b.useState([]);je.useEffect(()=>{const t=()=>{console.log("ğŸ”„ íˆ¬í‘œì¬ê°œ ì´ë²¤íŠ¸ ìˆ˜ì‹  - ìë™ìƒì„± ì¼ì • ì œê±°");const a=i.filter(l=>!l.autoGenerated);n(a),console.log("âœ… ìë™ìƒì„± ì¼ì • ì œê±° ì™„ë£Œ:",a.length,"ê°œ ë‚¨ìŒ")};window.addEventListener("voteSessionResumed",t);const o=i.filter(a=>a.autoGenerated);if(o.length>0&&(console.log("ğŸ” ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ìë™ìƒì„± ì¼ì • ë°œê²¬:",o.length,"ê°œ"),window.location.href.includes("vote-results")||document.querySelector('[data-vote-active="true"]'))){console.log("ğŸ”„ í™œì„± íˆ¬í‘œ ì„¸ì…˜ ê°ì§€ - ìë™ìƒì„± ì¼ì • ì œê±°");const l=i.filter(f=>!f.autoGenerated);n(l)}return()=>{window.removeEventListener("voteSessionResumed",t)}},[i,n]);const Y=je.useCallback(()=>_(null,null,function*(){var t;try{const o=Ge(),a=yield Te("/members"),l=yield fetch(a,{headers:{Authorization:`Bearer ${o}`}});if(l.ok){const p=(yield l.json()).games||[];if(p&&p.length>0){console.log("ğŸ”„ ì‹¤ì œ ê²½ê¸° ë°ì´í„° ë¡œë“œ ì™„ë£Œ:",p.length,"ê°œ");const T=p.map(g=>{const ne=Array.isArray(g.memberNames)?g.memberNames:typeof g.memberNames=="string"?(()=>{try{return JSON.parse(g.memberNames)}catch(S){return[]}})():[],Ee=Array.isArray(g.selectedMembers)?g.selectedMembers:typeof g.selectedMembers=="string"?(()=>{try{return JSON.parse(g.selectedMembers)}catch(S){return[]}})():[],u=new Set(Ee.filter(Boolean)),I=ne.filter(S=>{if(typeof S!="string")return!1;const V=S.trim();return!(!V||V.startsWith("ìš©ë³‘")||u.has(V))}).length,R=(Number(g.mercenaryCount)||0)+u.size+I;return B(M({},g),{autoGenerated:g.autoGenerated===!0,time:g.time||"",location:g.location||"ì¥ì†Œ ë¯¸ì •",eventType:g.eventType||"ìì²´",totalParticipantCount:R})});n(T),console.log("âœ… ê²½ê¸° ë°ì´í„° ì²˜ë¦¬ ì™„ë£Œ"),console.log("ğŸ“Š ì²« ë²ˆì§¸ ê²½ê¸° totalParticipantCount:",(t=T[0])==null?void 0:t.totalParticipantCount),console.log("ğŸ“Š ì²« ë²ˆì§¸ ê²½ê¸° ìƒì„¸:",T[0])}else console.log("ğŸ“ ë“±ë¡ëœ ê²½ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤"),n([])}}catch(o){console.error("ê²½ê¸° ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:",o),n([])}}),[n]);je.useEffect(()=>{Y()},[Y]);const X=je.useCallback(()=>{const t=(x||[]).map(l=>l.name),o=(U||[]).filter(l=>t.includes(l));return Array.from(new Set(o)).length},[U,x]),[N,re]=b.useState(""),[se,ae]=b.useState([]),[Z,oe]=b.useState(!1),[j,F]=b.useState(!1),D=Re(),ee=()=>{E(null),L([]),G({date:"",time:"",location:"",eventType:"ìì²´",mercenaryCount:0,memberNames:[""]}),J()},ie=t=>{console.log("ğŸ¯ handleEditGame í˜¸ì¶œ (v2):",t),console.log("ğŸ¯ game.autoGenerated:",t.autoGenerated);const o=B(M({},t),{autoGenerated:t.autoGenerated===!0});E(o),console.log("ğŸ¯ setEditingGame ì™„ë£Œ (v2):",o),console.log("ğŸ¯ autoGenerated í™•ì¸:",o.autoGenerated);const l=new Date(t.date).toISOString().split("T")[0],f=te(t.selectedMembers||[]),T=te(t.memberNames).filter(g=>!f.includes(g)&&!g.startsWith("ìš©ë³‘"));L(f),G({date:l,time:t.autoGenerated&&t.time==="ë¯¸ì •"?"":t.time||"",location:t.autoGenerated&&t.location==="ë¯¸ì •"?"":t.location,eventType:t.autoGenerated&&t.eventType==="ë¯¸ì •"?"ìì²´":t.eventType||"ìì²´",mercenaryCount:t.mercenaryCount||0,memberNames:T.length>0?T:[""]}),J()},z=t=>_(null,null,function*(){try{const o=Ge();let a;if(console.log("ğŸ” ì‚­ì œ ì›ë³¸ ID ë¶„ì„:",{originalId:t,type:typeof t,stringValue:t.toString()}),typeof t=="number")a=t;else{let g=t.toString();g.includes(":")&&(g=g.split(":")[0]),g=g.replace(/[^0-9]/g,""),a=parseInt(g),console.log("ğŸ”§ ì‚­ì œ ID íŒŒì‹± ê³¼ì •:",{original:t,afterColonRemoval:g,finalGameId:a})}if(isNaN(a)||a<=0||a>99999999)throw console.error("âŒ ìœ íš¨í•˜ì§€ ì•Šì€ ê²Œì„ ID:",{originalId:t,type:typeof t,gameId:a}),new Error(`ìœ íš¨í•˜ì§€ ì•Šì€ ê²Œì„ ID: ${t}`);console.log("âœ… ìµœì¢… íŒŒì‹±ëœ ì‚­ì œ ê²Œì„ ID:",{originalId:t,gameId:a});const l=i.find(g=>g.id===t||typeof g.id=="number"&&g.id===a||typeof g.id=="string"&&parseInt(g.id.replace(/[^0-9]/g,""))===a);if(l){if(console.log("ğŸ” ì‹¤ì œ ê²Œì„ ê°ì²´ ID:",l.id),typeof l.id=="number"&&l.id!==a)console.log("âš ï¸ ID ë¶ˆì¼ì¹˜ ê°ì§€, ì‹¤ì œ ê²Œì„ ID ì‚¬ìš©:",l.id),a=l.id;else if(typeof l.id=="string"){const g=parseInt(l.id.replace(/[^0-9]/g,""));!isNaN(g)&&g!==a&&(console.log("âš ï¸ ë¬¸ìì—´ ID íŒŒì‹±, ì‹¤ì œ ê²Œì„ ID ì‚¬ìš©:",g),a=g)}}console.log("ğŸ” ê²½ê¸° ì‚­ì œ ì‹œë„:",{originalId:t,gameId:a,tokenLength:o.length});const f=i.find(g=>g.id===t||typeof g.id=="number"&&g.id===a||typeof g.id=="string"&&parseInt(g.id.replace(/[^0-9]/g,""))===a);console.log("ğŸ—‘ï¸ ê²Œì„ ë°±ì—”ë“œì—ì„œ ì‚­ì œ:",{gameId:a,isAutoGenerated:f==null?void 0:f.autoGenerated});const p=yield Te(`/games/${a}`),T=yield fetch(p,{method:"DELETE",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(!T.ok){const g=yield T.json().catch(()=>({}));throw new Error(`ê²½ê¸° ì‚­ì œ ì‹¤íŒ¨: ${T.status} - ${g.error||T.statusText}`)}yield Y(),window.dispatchEvent(new CustomEvent("gamesChanged")),s&&s(),D({title:"ê²½ê¸° ì‚­ì œ ì™„ë£Œ",description:"ê²½ê¸°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:2e3,isClosable:!0})}catch(o){console.error("ê²½ê¸° ì‚­ì œ ì˜¤ë¥˜:",o),D({title:"ê²½ê¸° ì‚­ì œ ì‹¤íŒ¨",description:"ê²½ê¸° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",status:"error",duration:3e3,isClosable:!0})}}),O=()=>{G(t=>B(M({},t),{memberNames:[...t.memberNames,""]}))},W=t=>{h.memberNames.length>1&&G(o=>B(M({},o),{memberNames:o.memberNames.filter((a,l)=>l!==t)}))},me=(t,o)=>{G(a=>B(M({},a),{memberNames:a.memberNames.map((l,f)=>f===t?o:l)}))},te=t=>{if(t==null)return[];if(Array.isArray(t))return t.filter(o=>o&&typeof o=="string"&&o.trim()!=="");if(typeof t=="string")try{const o=JSON.parse(t);if(Array.isArray(o))return o.filter(a=>a&&typeof a=="string"&&a.trim()!=="")}catch(o){console.warn("parseMemberNames JSON íŒŒì‹± ì‹¤íŒ¨:",o)}return[]},pe=()=>{const t=X(),o=h.mercenaryCount,a=h.memberNames.filter(l=>l.trim()!=="").length;return o+t+a};je.useEffect(()=>{},[h.mercenaryCount,h.memberNames]);const ge=t=>_(null,null,function*(){if(t.trim()){oe(!0);try{const o=yield Te(`/search-location?query=${encodeURIComponent(t)}`),a=yield fetch(o);if(a.ok){const l=yield a.json();ae(l.documents||[]),F(!0)}else D({title:"ê²€ìƒ‰ ì‹¤íŒ¨",description:"ì¥ì†Œ ê²€ìƒ‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",status:"error",duration:3e3,isClosable:!0})}catch(o){console.error("ì¥ì†Œ ê²€ìƒ‰ ì˜¤ë¥˜:",o),D({title:"ê²€ìƒ‰ ì˜¤ë¥˜",description:"ì¥ì†Œ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",status:"error",duration:3e3,isClosable:!0})}finally{oe(!1)}}}),d=t=>{G(o=>B(M({},o),{location:t.place_name})),re(t.place_name),F(!1)},m=()=>_(null,null,function*(){if(!h.date||!h.location){D({title:"ì…ë ¥ ì˜¤ë¥˜",description:"ë‚ ì§œì™€ ì¥ì†Œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.",status:"error",duration:2e3,isClosable:!0});return}const t=new Date(h.date);if(i.find(a=>new Date(a.date).toDateString()===t.toDateString()&&(!c||a.id!==c.id)&&!a.autoGenerated)){D({title:"ì¤‘ë³µ ì¼ì •",description:"í•´ë‹¹ ë‚ ì§œì— ì´ë¯¸ ê²½ê¸°ê°€ ìˆìŠµë‹ˆë‹¤.",status:"error",duration:3e3,isClosable:!0});return}try{if(c){if(c.autoGenerated===!0){console.log("ğŸ¯ ìë™ìƒì„± ê²½ê¸° ìˆ˜ì • - ì¼ì •í™•ì • ê¸°ëŠ¥ ìˆ˜í–‰");const S=Ge();if(!h.time||!h.location||!h.eventType){D({title:"ì •ë³´ ë¶€ì¡±",description:"ì‹œê°„, ì¥ì†Œ, ì´ë²¤íŠ¸ ìœ í˜•ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.",status:"warning",duration:3e3,isClosable:!0});return}console.log("ğŸ¯ ìë™ìƒì„± ê²½ê¸° ì¼ì •í™•ì • ì‹œë„:",{gameId:c.id,hasToken:!!S});const V={date:t.toISOString(),time:h.time,location:h.location,eventType:h.eventType||"ìì²´",gameType:h.eventType==="ë§¤ì¹˜"?"MATCH":"SELF",memberNames:h.memberNames.filter(K=>K.trim()!==""),selectedMembers:U,mercenaryCount:h.mercenaryCount||0};console.log("ğŸ¯ ìë™ìƒì„± ê²½ê¸° ì¼ì •í™•ì • ë°ì´í„°:",{gameId:c.id,formData:V});let P;if(console.log("ğŸ” ì›ë³¸ ID ë¶„ì„:",{originalId:c.id,type:typeof c.id,stringValue:c.id.toString()}),typeof c.id=="number")P=c.id;else{let K=c.id.toString();K.includes(":")&&(K=K.split(":")[0]),K=K.replace(/[^0-9]/g,""),P=parseInt(K),console.log("ğŸ”§ ID íŒŒì‹± ê³¼ì •:",{original:c.id,afterColonRemoval:K,finalGameId:P})}if(isNaN(P)||P<=0||P>99999999)throw console.error("âŒ ìœ íš¨í•˜ì§€ ì•Šì€ ê²Œì„ ID:",{originalId:c.id,type:typeof c.id,gameId:P}),new Error(`ìœ íš¨í•˜ì§€ ì•Šì€ ê²Œì„ ID: ${c.id}`);console.log("âœ… ìµœì¢… íŒŒì‹±ëœ ê²Œì„ ID:",{originalId:c.id,gameId:P});const le=i.find(K=>K.id===c.id);le&&(console.log("ğŸ” ì‹¤ì œ ê²Œì„ ê°ì²´ ID:",le.id),typeof le.id=="number"&&le.id!==P&&(console.log("âš ï¸ ID ë¶ˆì¼ì¹˜ ê°ì§€, ì‹¤ì œ ê²Œì„ ID ì‚¬ìš©:",le.id),P=le.id)),console.log("ğŸš€ ìë™ìƒì„± ê²Œì„ ë°±ì—”ë“œ ìƒì„± API í˜¸ì¶œ");const Ne=yield Te("/games"),Ie=yield fetch(Ne,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify(V)});if(!Ie.ok){const K=yield Ie.json().catch(()=>({}));throw console.error("ìë™ìƒì„± ê²½ê¸° ì¼ì •í™•ì • ì‹¤íŒ¨ ì‘ë‹µ:",{status:Ie.status,statusText:Ie.statusText,errorData:K}),new Error(`ì¼ì •í™•ì • ì‹¤íŒ¨: ${Ie.status} - ${K.details||Ie.statusText}`)}const ke=yield Ie.json();console.log("ìë™ìƒì„± ê²½ê¸° ì¼ì •í™•ì • ì„±ê³µ:",ke),jt({gameId:P,gameData:ke,confirmedBy:"ê´€ë¦¬ì"}),Qe("games"),Xe("ê²½ê¸° ì¼ì •ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤! íšŒì›ë“¤ì—ê²Œ ì•Œë¦¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.","success");try{yield zt({gameDate:ke.date||h.date,gameTime:ke.time||h.time||"ë¯¸ì •",gameLocation:ke.location||h.location||"ë¯¸ì •",gameType:ke.gameType||h.gameType||"ë¯¸ì •"})}catch(K){console.warn("í‘¸ì‹œ ì•Œë¦¼ í‘œì‹œ ì‹¤íŒ¨:",K)}console.log("ğŸ¯ ìë™ìƒì„± ì¼ì • í™•ì • ì™„ë£Œ - ë°±ì—”ë“œì—ì„œ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°"),yield Y(),console.log("âœ… ë°±ì—”ë“œì—ì„œ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ"),window.dispatchEvent(new CustomEvent("gamesChanged")),s&&s(),r(),D({title:"ğŸ¯ ê²½ê¸° ì¼ì • í™•ì • ì™„ë£Œ!",description:"íšŒì›ë“¤ì—ê²Œ ì•Œë¦¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:5e3,isClosable:!0});return}const a=B(M({},h),{eventType:h.eventType||"ìì²´",memberNames:h.memberNames.filter(S=>S.trim()!==""),selectedMembers:U,mercenaryCount:h.mercenaryCount||0,gameType:h.eventType==="ë§¤ì¹˜"?"MATCH":"SELF"}),l=Ge();if(!l){D({title:"ì¸ì¦ ì˜¤ë¥˜",description:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.",status:"error",duration:3e3,isClosable:!0});return}console.log("ğŸ” ê²½ê¸° ìˆ˜ì • ì‹œë„:",{gameId:c.id,tokenLength:l.length,hasToken:!!l});let f;if(console.log("ğŸ” ìˆ˜ì • ì›ë³¸ ID ë¶„ì„:",{originalId:c.id,type:typeof c.id,stringValue:c.id.toString()}),typeof c.id=="number")f=c.id;else{let S=c.id.toString();S.includes(":")&&(S=S.split(":")[0]),S=S.replace(/[^0-9]/g,""),f=parseInt(S),console.log("ğŸ”§ ìˆ˜ì • ID íŒŒì‹± ê³¼ì •:",{original:c.id,afterColonRemoval:S,finalGameId:f})}if(isNaN(f)||f<=0||f>99999999)throw console.error("âŒ ìœ íš¨í•˜ì§€ ì•Šì€ ê²Œì„ ID:",{originalId:c.id,type:typeof c.id,gameId:f}),new Error(`ìœ íš¨í•˜ì§€ ì•Šì€ ê²Œì„ ID: ${c.id}`);console.log("âœ… ìµœì¢… íŒŒì‹±ëœ ìˆ˜ì • ê²Œì„ ID:",{originalId:c.id,gameId:f});const p=i.find(S=>S.id===c.id);p&&(console.log("ğŸ” ì‹¤ì œ ê²Œì„ ê°ì²´ ID:",p.id),typeof p.id=="number"&&p.id!==f&&(console.log("âš ï¸ ID ë¶ˆì¼ì¹˜ ê°ì§€, ì‹¤ì œ ê²Œì„ ID ì‚¬ìš©:",p.id),f=p.id));const T=f.toString(),g=typeof f=="number"&&Number.isSafeInteger(f)&&f>0&&f<1e9&&!T.includes(".")&&T.length<10,ne=yield Te(g?`/games/${f}`:"/games"),Ee=g?"PUT":"POST";console.log("ğŸ” API ìš”ì²­ ì •ë³´:",{url:ne,method:Ee,tokenLength:l.length,hasToken:!!l});const u=yield fetch(ne,{method:Ee,headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(M({},a))});if(console.log("ğŸ” API ì‘ë‹µ ìƒíƒœ:",u.status,u.statusText),!u.ok){if(u.status===401){D({title:"ì¸ì¦ ì˜¤ë¥˜",description:"ë¡œê·¸ì¸ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.",status:"error",duration:3e3,isClosable:!0}),localStorage.removeItem("token"),localStorage.removeItem("auth_token_backup"),sessionStorage.removeItem("token"),window.location.href="/login";return}const S=yield u.text();throw console.error("ê²½ê¸° ìˆ˜ì • ì‹¤íŒ¨:",S),new Error(`ê²½ê¸° ìˆ˜ì • ì‹¤íŒ¨: ${u.status} ${S}`)}const I=yield u.json();console.log("ê²½ê¸° ìˆ˜ì • ì„±ê³µ:",I),I.autoGeneratedGamesDeleted?(console.log("ğŸ¯ ìë™ìƒì„± ì¼ì •ì´ ì‚­ì œë¨ - UI ìƒˆë¡œê³ ì¹¨ í•„ìš”"),setTimeout(()=>{window.location.reload()},1e3)):yield Y(),window.dispatchEvent(new CustomEvent("gamesChanged")),s&&s();const R=c.autoGenerated&&h.time&&h.location&&h.eventType&&h.time!=="ë¯¸ì •"&&h.location!=="ë¯¸ì •";D(R?{title:"ğŸ¯ ê²½ê¸° ì¼ì • í™•ì • ì™„ë£Œ!",description:"íšŒì›ë“¤ì—ê²Œ ì•Œë¦¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ê°™ì€ ì£¼ì˜ ë‹¤ë¥¸ ìë™ìƒì„±ëœ ì¼ì •ë“¤ì€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:5e3,isClosable:!0}:{title:"ê²½ê¸° ìˆ˜ì • ì™„ë£Œ",description:"ê²½ê¸° ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:2e3,isClosable:!0})}else{const a=B(M({},h),{eventType:h.eventType||"ìì²´",memberNames:h.memberNames.filter(g=>g.trim()!==""),selectedMembers:U,createdById:1,gameType:h.eventType==="ë§¤ì¹˜"?"MATCH":"SELF"}),l=Ge();if(!l){D({title:"ì¸ì¦ ì˜¤ë¥˜",description:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.",status:"error",duration:3e3,isClosable:!0});return}console.log("ğŸ” ê²½ê¸° ì¶”ê°€ ì‹œë„:",{tokenLength:l.length});const f=yield Te("/games"),p=yield fetch(f,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(a)});if(!p.ok)throw new Error("ê²½ê¸° ì¶”ê°€ ì‹¤íŒ¨");const T=yield p.json();console.log("ê²½ê¸° ì¶”ê°€ ì„±ê³µ:",T),T.autoGeneratedGamesDeleted&&(console.log("ğŸ¯ ìë™ìƒì„± ì¼ì •ì´ ì‚­ì œë¨ - UI ìƒˆë¡œê³ ì¹¨ í•„ìš”"),setTimeout(()=>{window.location.reload()},1e3)),yield Y(),window.dispatchEvent(new CustomEvent("gamesChanged")),s&&s(),D({title:"ê²½ê¸° ì¶”ê°€ ì™„ë£Œ",description:"ìƒˆ ê²½ê¸°ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",status:"success",duration:2e3,isClosable:!0})}r()}catch(a){console.error("ê²½ê¸° ì €ì¥ ì˜¤ë¥˜:",a);const l=a instanceof Error?a.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";D({title:"ì €ì¥ ì‹¤íŒ¨",description:`ê²½ê¸° ì •ë³´ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${l}`,status:"error",duration:5e3,isClosable:!0})}}),y=t=>{switch(t){case"ìì²´":return"ìì²´";case"ë§¤ì¹˜":return"ë§¤ì¹˜";case"íšŒì‹":return"íšŒì‹";default:return"ìì²´"}};return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{spacing:5,align:"stretch",children:[e.jsxs(Be,{justify:"space-between",align:"flex-end",wrap:"wrap",gap:3,children:[e.jsxs(ce,{align:"flex-start",spacing:0,children:[e.jsxs($,{spacing:3,children:[e.jsx(v,{fontSize:"2xl",children:"âš½"}),e.jsx(v,{fontSize:"2xl",fontWeight:"bold",lineHeight:"shorter",children:"ê²½ê¸° ê´€ë¦¬"})]}),e.jsx(v,{fontSize:"sm",color:"gray.600",lineHeight:"tall",children:"ê²½ê¸° ì¼ì •ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}),e.jsx(k,{colorScheme:"blue",bg:C,_hover:{bg:"#003d7a"},leftIcon:e.jsx(_e,{}),onClick:ee,size:"sm",children:"ì¶”ê°€"})]}),e.jsx(A,{bg:"white",border:"1px",borderColor:"gray.200",borderRadius:"lg",overflow:"hidden",children:(console.log("=== GameManagement - ë Œë”ë§ ì¡°ê±´ ì²´í¬ ==="),console.log("games:",i),console.log("games?.length:",i==null?void 0:i.length),console.log("games?.length === 0:",(i==null?void 0:i.length)===0),(i==null?void 0:i.length)===0?e.jsx(A,{px:{base:6,md:8},py:{base:12,md:14},textAlign:"center",bg:"gray.50",children:e.jsxs(ce,{spacing:3,align:"center",children:[e.jsx(Be,{align:"center",justify:"center",w:12,h:12,borderRadius:"full",bg:"blue.100",children:e.jsx(Tt,{boxSize:6,color:"blue.500"})}),e.jsx(v,{fontWeight:"semibold",fontSize:"lg",color:"gray.800",children:"ë“±ë¡ëœ ê²½ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx(v,{fontSize:"sm",color:"gray.500",children:"ìƒˆ ê²½ê¸°ë¥¼ ì¶”ê°€í•´ ì¼ì •ì„ ê´€ë¦¬í•´ ë³´ì„¸ìš”."}),e.jsx(k,{size:"sm",colorScheme:"blue",leftIcon:e.jsx(_e,{}),onClick:ee,children:"ê²½ê¸° ì¶”ê°€"})]})}):e.jsxs(rt,{variant:"simple",children:[e.jsx(st,{bg:"gray.50",children:e.jsxs(Pe,{children:[e.jsx(de,{textAlign:"center",children:"ë‚ ì§œ"}),e.jsx(de,{textAlign:"center",children:"ì¥ì†Œ"}),e.jsx(de,{textAlign:"center",children:"ì´ë²¤íŠ¸ ìœ í˜•"}),e.jsx(de,{textAlign:"center",children:"ì „ì²´ ì¸ì›"}),e.jsx(de,{textAlign:"center",children:"ìƒì„±ì"}),e.jsx(de,{textAlign:"center",children:"ì‘ì—…"})]})}),e.jsx(at,{children:he.map(t=>{var o,a;return e.jsxs(Pe,{bg:t.autoGenerated?"blue.50":"white",children:[e.jsx(ue,{textAlign:"center",py:1,children:e.jsxs(ce,{spacing:1,align:"center",children:[e.jsx(v,{fontWeight:"medium",children:(()=>{const l=new Date(t.date),f=l.getFullYear(),p=String(l.getMonth()+1).padStart(2,"0"),T=String(l.getDate()).padStart(2,"0"),ne=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "][l.getDay()];return t.autoGenerated?`${f}.${p}.${T}.(${ne}) ë¯¸ì •`:t.time?`${f}.${p}.${T}.(${ne}) ${t.time}`:`${f}.${p}.${T}.(${ne})`})()}),t.autoGenerated&&e.jsx(we,{colorScheme:"blue",variant:"outline",size:"sm",children:"ìë™ìƒì„±"})]})}),e.jsx(ue,{textAlign:"center",py:1,children:e.jsx(v,{fontSize:"sm",color:"gray.600",children:t.autoGenerated?"ë¯¸ì •":t.location})}),e.jsx(ue,{textAlign:"center",py:1,children:e.jsx(we,{colorScheme:t.autoGenerated?"gray":t.eventType==="ë§¤ì¹˜"?"blue":t.eventType==="íšŒì‹"?"orange":"purple",variant:"subtle",children:t.autoGenerated?"ë¯¸ì •":y(t.eventType||"ìì²´")})}),e.jsx(ue,{textAlign:"center",py:1,children:e.jsxs(we,{colorScheme:"blackAlpha",variant:"subtle",children:[(()=>{var f;const l=(f=t.totalParticipantCount)!=null?f:0;return l===0&&t.id&&console.warn("âš ï¸ totalParticipantCountê°€ 0ì¸ ê²½ê¸°:",{id:t.id,date:t.date,mercenaryCount:t.mercenaryCount,selectedMembers:t.selectedMembers,memberNames:t.memberNames,totalParticipantCount:t.totalParticipantCount,fullGame:t}),l})(),"ëª…"]})}),e.jsx(ue,{textAlign:"center",py:1,children:e.jsx(v,{fontSize:"sm",color:"gray.600",children:((o=t.createdBy)==null?void 0:o.name)||((a=x.find(l=>l.id===t.createdById))==null?void 0:a.name)||"ì•Œ ìˆ˜ ì—†ìŒ"})}),e.jsx(ue,{textAlign:"center",py:1,children:e.jsxs($,{spacing:2,justify:"center",children:[e.jsx(De,{label:t.autoGenerated?"ì¼ì •í™•ì •":"ê²½ê¸° ìˆ˜ì •",placement:"top",hasArrow:!0,bg:t.autoGenerated?"green.600":"blue.600",color:"white",fontSize:"sm",children:e.jsx(Ae,{"aria-label":t.autoGenerated?"ì¼ì •í™•ì •":"ê²½ê¸° ìˆ˜ì •",icon:e.jsx(it,{}),size:"sm",variant:"ghost",colorScheme:t.autoGenerated?"green":"blue",onClick:()=>ie(t)})}),e.jsx(De,{label:"ê²½ê¸° ì‚­ì œ",placement:"top",hasArrow:!0,bg:"red.600",color:"white",fontSize:"sm",children:e.jsx(Ae,{"aria-label":"ê²½ê¸° ì‚­ì œ",icon:e.jsx(Ue,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>z(t.id)})})]})})]},t.id)})})]}))})]}),e.jsxs(ye,{isOpen:w,onClose:r,children:[e.jsx(ve,{}),e.jsxs(Se,{maxW:"500px",children:[e.jsx(ze,{py:4,children:c?c.autoGenerated?"âš½ ì¼ì •í™•ì •":"âš½ ê²½ê¸° ìˆ˜ì •":"âš½ ê²½ê¸° ì¶”ê°€"}),e.jsx(Fe,{}),e.jsx(Ce,{pb:4,children:e.jsxs(ce,{spacing:2,children:[e.jsxs(H,{children:[e.jsx(q,{children:"ğŸ“… ì¼ì‹œ & ì´ë²¤íŠ¸"}),e.jsxs($,{spacing:2,align:"center",children:[e.jsx(Q,{type:"date",value:h.date,onChange:t=>G(B(M({},h),{date:t.target.value})),size:"sm",h:"36px",flex:1,minW:"200px"}),e.jsxs($e,{value:h.time||"",onChange:t=>G(B(M({},h),{time:t.target.value})),placeholder:"ì‹œê°„",size:"sm",h:"36px",w:"120px",children:[e.jsx("option",{value:"18:00",children:"ì˜¤í›„ 6:00"}),e.jsx("option",{value:"18:30",children:"ì˜¤í›„ 6:30"}),e.jsx("option",{value:"19:00",children:"ì˜¤í›„ 7:00"}),e.jsx("option",{value:"19:30",children:"ì˜¤í›„ 7:30"}),e.jsx("option",{value:"20:00",children:"ì˜¤í›„ 8:00"}),e.jsx("option",{value:"20:30",children:"ì˜¤í›„ 8:30"})]}),e.jsxs($e,{value:h.eventType,onChange:t=>G(B(M({},h),{eventType:t.target.value})),size:"sm",h:"36px",w:"100px",children:[e.jsx("option",{value:"ìì²´",children:"ìì²´"}),e.jsx("option",{value:"ë§¤ì¹˜",children:"ë§¤ì¹˜"}),e.jsx("option",{value:"íšŒì‹",children:"íšŒì‹"})]})]})]}),e.jsxs(H,{children:[e.jsx(q,{children:"ğŸ“ ì¥ì†Œ"}),e.jsxs(ce,{spacing:2,align:"stretch",children:[e.jsxs($,{children:[e.jsx(Q,{value:N,onChange:t=>re(t.target.value),placeholder:"ì¥ì†Œëª…ì„ ê²€ìƒ‰í•˜ì„¸ìš”",onKeyPress:t=>t.key==="Enter"&&ge(N)}),e.jsx(k,{onClick:()=>ge(N),isLoading:Z,colorScheme:"blue",size:"sm",children:"ê²€ìƒ‰"})]}),j&&se.length>0&&e.jsx(A,{border:"1px solid",borderColor:"gray.200",borderRadius:"md",maxH:"200px",overflowY:"auto",bg:"white",zIndex:10,children:se.map((t,o)=>e.jsxs(A,{p:3,borderBottom:"1px solid",borderColor:"gray.100",cursor:"pointer",_hover:{bg:"gray.50"},onClick:()=>d(t),children:[e.jsx(v,{fontWeight:"bold",children:t.place_name}),e.jsx(v,{fontSize:"sm",color:"gray.600",children:t.address_name})]},o))}),e.jsx(Q,{value:h.location,onChange:t=>G(B(M({},h),{location:t.target.value})),placeholder:"ì„ íƒëœ ì¥ì†Œ ë˜ëŠ” ì§ì ‘ ì…ë ¥"})]})]}),e.jsxs(H,{children:[e.jsxs($,{justify:"space-between",align:"center",mb:2,children:[e.jsx(q,{mb:0,children:"ğŸ‘¥ ì¸ì› ê´€ë¦¬"}),e.jsx(A,{ml:4,children:e.jsxs(v,{fontSize:"sm",fontWeight:"bold",color:"blue.600",children:["ì „ì²´ ì¸ì›: ",pe(),"ëª… (íšŒì› ",X(),"ëª… + ìš©ë³‘ ",h.mercenaryCount,"ëª… + ìˆ˜ê¸°ì…ë ¥ ",h.memberNames.filter(t=>t.trim()!=="").length,"ëª…)"]})})]}),e.jsxs($,{spacing:4,align:"start",children:[e.jsxs(A,{flex:1,children:[e.jsx(v,{fontSize:"sm",color:"gray.600",mb:1,fontWeight:"bold",children:"íšŒì› ì„ íƒ"}),e.jsx(A,{children:x.map(t=>{const o=U.includes(t.name);return e.jsx(k,{size:"xs",fontSize:"xs",borderRadius:"full",h:"28px",px:3,mr:2,mb:2,bg:o?C:"white",color:o?"white":C,borderColor:C,borderWidth:"1px",_hover:{bg:o?"#003d7a":"rgba(0, 78, 168, 0.08)",color:o?"white":C},onClick:()=>{L(o?a=>a.filter(l=>l!==t.name):a=>[...a,t.name])},children:t.name},t.id)})})]}),e.jsxs(A,{flex:1,children:[e.jsx(v,{fontSize:"sm",color:"gray.600",mb:1,fontWeight:"bold",children:"ìš©ë³‘ & ìˆ˜ê¸° ì…ë ¥"}),e.jsxs($,{spacing:3,align:"flex-start",children:[e.jsxs(A,{flex:1,children:[e.jsx(v,{fontSize:"xs",color:"gray.500",mb:1,children:"ìš©ë³‘ ì¸ì›"}),e.jsx(Q,{type:"number",value:h.mercenaryCount,onChange:t=>G(B(M({},h),{mercenaryCount:parseInt(t.target.value)||0})),placeholder:"0",min:"0",size:"sm",h:"32px"})]}),e.jsxs(A,{flex:1,children:[e.jsx(v,{fontSize:"xs",color:"gray.500",mb:1,children:"ìˆ˜ê¸° ì…ë ¥"}),h.memberNames.map((t,o)=>e.jsxs($,{mb:1,align:"center",children:[e.jsx(Q,{value:t,onChange:a=>me(o,a.target.value),placeholder:`íŒ€ì› ${o+1} ì´ë¦„`,size:"sm",h:"32px"}),h.memberNames.length>1&&e.jsx(Ae,{"aria-label":"ìˆ˜ê¸° ì…ë ¥ ì‚­ì œ",size:"sm",icon:e.jsx(Ue,{boxSize:3}),colorScheme:"red",variant:"ghost",onClick:()=>W(o)})]},o)),e.jsx(k,{size:"sm",colorScheme:"blue",variant:"outline",onClick:O,leftIcon:e.jsx(_e,{}),w:"100%",mt:1,children:"íŒ€ì› ì¶”ê°€"})]})]})]})]})]}),!(c&&c.autoGenerated===!0)&&e.jsxs($,{spacing:3,w:"100%",children:[e.jsx(k,{colorScheme:"blue",onClick:m,flex:1,children:c?"ìˆ˜ì •":"ì¶”ê°€"}),e.jsx(k,{onClick:r,flex:1,children:"ì·¨ì†Œ"})]}),c&&c.autoGenerated===!0&&e.jsxs(A,{mt:4,p:4,bg:"green.50",borderRadius:"md",border:"1px",borderColor:"green.200",children:[e.jsx(v,{fontSize:"md",fontWeight:"bold",color:"green.700",mb:2,children:"ì´ ê²Œì„ì„ ìµœì¢… í™•ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"}),e.jsx(v,{fontSize:"sm",color:"green.600",mb:3,children:"í™•ì • ì‹œ íšŒì›ë“¤ì—ê²Œ ì•Œë¦¼ì´ ë°œì†¡ë˜ê³ , ê°™ì€ ì£¼ì˜ ë‹¤ë¥¸ ìë™ìƒì„±ëœ ì¼ì •ë“¤ì€ ì‚­ì œë©ë‹ˆë‹¤."}),e.jsxs($,{spacing:3,w:"100%",children:[e.jsx(k,{colorScheme:"green",size:"lg",flex:1,leftIcon:e.jsx(nt,{}),onClick:m,children:"ì¼ì •í™•ì •"}),e.jsx(k,{onClick:r,flex:1,children:"ì·¨ì†Œ"})]})]})]})})]})]})]})}export{Bt as G,Lt as H,Nt as L,Ot as M,Mt as S,Wt as a,Vt as i};
