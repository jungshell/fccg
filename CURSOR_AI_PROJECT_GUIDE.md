# 🎯 Cursor AI를 이용한 FC CHAL-GGYEO 홈페이지 재구현 가이드

> 이 문서는 Cursor AI를 사용하여 FC CHAL-GGYEO와 동일한 기능의 홈페이지를 효율적으로 구축하기 위한 단계별 자연어 명령어 모음입니다.

---

## 📋 목차

1. [프로젝트 초기 설정](#1-프로젝트-초기-설정)
2. [백엔드 구축](#2-백엔드-구축)
3. [프론트엔드 구축](#3-프론트엔드-구축)
4. [핵심 기능 구현](#4-핵심-기능-구현)
5. [고급 기능 구현](#5-고급-기능-구현)
6. [배포 및 최적화](#6-배포-및-최적화)

---

## 1. 프로젝트 초기 설정

### 1.1 프로젝트 구조 생성

```
프로젝트 루트에 backend와 frontend 폴더를 생성하고, 각각의 package.json을 만들어줘.
- backend: Node.js + Express + TypeScript + Prisma
- frontend: React + TypeScript + Vite + Chakra UI
```

### 1.2 환경 변수 설정

```
프로젝트 루트에 .env.example 파일들을 생성해줘:
- backend/.env.example: DATABASE_URL, JWT_SECRET, PORT, KAKAO_API_KEY, CLOUDINARY 설정
- frontend/.env.example: VITE_API_BASE_URL 설정
각 환경변수에 대한 설명 주석도 추가해줘.
```

### 1.3 Git 설정

```
.gitignore 파일을 생성하고, node_modules, .env, dist, logs, uploads 등을 제외하도록 설정해줘.
```

---

## 2. 백엔드 구축

### 2.1 데이터베이스 스키마 설계

```
Prisma를 사용해서 다음 모델들을 포함한 schema.prisma 파일을 만들어줘:
- User: id, email, password, name, phone, role (SUPER_ADMIN, ADMIN, MEMBER), status, createdAt, updatedAt
- Game: id, date, time, location, eventType, gameType, autoGenerated, createdById, createdAt, updatedAt
- VoteSession: id, weekStartDate, startTime, endTime, isActive, isCompleted, createdAt, updatedAt
- Vote: id, voteSessionId, userId, selectedDays (JSON), createdAt
- Gallery: id, title, imageUrl, uploaderId, eventDate, eventType, clickCount, createdAt, updatedAt
- GalleryLike: id, galleryId, userId, createdAt
- GalleryComment: id, galleryId, userId, content, createdAt, updatedAt
- VideoViewStat: id, videoKey, viewCount, lastViewedAt
- Tag: id, name, galleryId
모든 관계(relations)도 정확히 설정해줘.
```

### 2.2 Express 서버 기본 설정

```
Express 서버를 TypeScript로 만들어줘:
- CORS 설정 (모든 origin 허용)
- body-parser 미들웨어 (JSON, URL-encoded)
- Helmet 보안 미들웨어
- Morgan 로깅 미들웨어
- 에러 핸들링 미들웨어
- /api/auth 경로로 라우팅 설정
포트는 4000번 사용
```

### 2.3 인증 미들웨어

```
JWT 기반 인증 미들웨어를 만들어줘:
- authenticateToken 함수: Authorization 헤더에서 Bearer 토큰 추출
- 토큰 검증 후 req.user에 사용자 정보 저장
- 토큰이 없거나 유효하지 않으면 401 에러 반환
- 선택적 인증 미들웨어도 만들어줘 (토큰이 있으면 사용자 정보 저장, 없으면 null)
```

### 2.4 보안 미들웨어

```
보안 관련 미들웨어를 만들어줘:
- express-rate-limit으로 API 요청 제한 (일반 API: 300회/15분, 인증 API: 15회/15분)
- Helmet으로 보안 헤더 설정
- CORS 정책 설정
```

---

## 3. 프론트엔드 구축

### 3.1 프로젝트 초기 설정

```
Vite + React + TypeScript 프로젝트를 설정해줘:
- Chakra UI 설치 및 테마 설정
- React Router DOM 설정
- Zustand 상태 관리 설정
- 기본 폴더 구조 생성 (components, pages, api, store, utils, config)
```

### 3.2 라우팅 설정

```
React Router를 사용해서 다음 라우트들을 설정해줘:
- /: 홈 대시보드 (공개)
- /schedule-v2: 일정 페이지 (공개, 비로그인도 접근 가능)
- /gallery/photos: 사진 갤러리 (공개, 비로그인도 접근 가능)
- /gallery/videos: 동영상 갤러리 (공개, 비로그인도 접근 가능)
- /login: 로그인 페이지
- /signup: 회원가입 페이지
- /admin: 관리자 페이지 (로그인 필요, ProtectedRoute)
- /profile: 프로필 페이지 (로그인 필요, ProtectedRoute)
ProtectedRoute 컴포넌트도 만들어서 로그인하지 않은 사용자는 /login으로 리다이렉트하도록 해줘.
```

### 3.3 API 클라이언트 설정

```
API 호출을 위한 유틸리티를 만들어줘:
- getApiBaseUrl 함수: 환경에 따라 API BASE URL 반환 (로컬: /api/auth, 프로덕션: 환경변수)
- getApiUrl 함수: 엔드포인트 경로를 받아서 완전한 URL 반환
- request 함수: fetch를 래핑한 함수 (타임아웃 30초, 에러 처리, 토큰 자동 추가)
- auth.ts: 인증 관련 API 함수들 (login, register, getProfile, updateProfile 등)
```

### 3.4 상태 관리 (Zustand)

```
Zustand를 사용해서 인증 상태를 관리하는 store를 만들어줘:
- user: 현재 로그인한 사용자 정보
- token: JWT 토큰
- setUser, setToken, logout 함수
- localStorage에 자동 저장/복원
```

---

## 4. 핵심 기능 구현

### 4.1 인증 시스템

#### 4.1.1 회원가입 API

```
백엔드에 POST /api/auth/register 엔드포인트를 만들어줘:
- 요청: { name, email, password, phone? }
- 비밀번호 bcrypt로 해싱
- 이메일 중복 체크
- 기본 role은 MEMBER
- JWT 토큰 생성 및 반환
- 에러 처리 (400, 409 등)
```

#### 4.1.2 로그인 API

```
백엔드에 POST /api/auth/login 엔드포인트를 만들어줘:
- 요청: { email, password }
- 이메일로 사용자 조회
- bcrypt로 비밀번호 검증
- JWT 토큰 생성 및 반환
- 에러 처리 (401)
```

#### 4.1.3 회원가입 페이지

```
회원가입 페이지를 만들어줘:
- 이름, 이메일, 비밀번호, 전화번호 입력 필드
- Chakra UI FormControl 사용
- 유효성 검증 (이메일 형식, 비밀번호 최소 6자)
- 제출 시 API 호출 및 에러 처리
- 성공 시 로그인 페이지로 리다이렉트
- 로딩 상태 표시
```

#### 4.1.4 로그인 페이지

```
로그인 페이지를 만들어줘:
- 이메일, 비밀번호 입력 필드
- "로그인" 버튼
- 제출 시 API 호출 및 토큰 저장
- 성공 시 홈으로 리다이렉트
- 에러 메시지 표시
```

### 4.2 일정 관리 시스템

#### 4.2.1 투표 세션 생성 API

```
백엔드에 POST /api/auth/votes/sessions 엔드포인트를 만들어줘:
- 매주 월요일 자동 생성 (node-cron 사용)
- weekStartDate 계산 (이번 주 월요일)
- startTime: 현재 시간
- endTime: 다음 목요일 17시
- isActive: true, isCompleted: false
```

#### 4.2.2 투표 제출 API

```
백엔드에 POST /api/auth/votes 엔드포인트를 만들어줘:
- 요청: { voteSessionId, selectedDays: ['월', '화', ...] 또는 ['불참'] }
- 기존 투표가 있으면 삭제 후 새로 생성
- selectedDays를 JSON으로 저장
- 투표 결과 집계 (각 요일별 투표 수)
```

#### 4.2.3 통합 투표 데이터 API

```
백엔드에 GET /api/auth/votes/unified 엔드포인트를 만들어줘:
- 활성 세션 정보 (activeSession)
- 지난 주 결과 (lastWeekResults)
- 모든 회원 정보 (allMembers)
- 각 회원의 투표 여부 포함
- 투표 결과 집계 (각 요일별 투표 수, 참여자 목록)
```

#### 4.2.4 일정 페이지 (SchedulePageV2)

```
일정 페이지를 만들어줘:
- 달력 뷰 (월별)
- "다음주 경기 투표하기" 카드
  - 활성 세션이 있으면 투표 UI 표시
  - 요일 선택 (월~금, 불참)
  - "투표하기" 버튼 (로그인 필요)
  - 투표 마감 시 "투표종료" 표시 및 결과 표시
- 투표 현황 모달
  - 각 요일별 투표 수
  - 투표한 인원명 표시 (툴팁)
- 확정된 경기 표시
- 비로그인 사용자도 일정 조회 가능
- 로그인한 사용자만 투표 가능
```

### 4.3 경기 관리 시스템

#### 4.3.1 경기 생성 API

```
백엔드에 POST /api/auth/games 엔드포인트를 만들어줘:
- 요청: { date, time, location, eventType, gameType, selectedMembers?, mercenaryCount?, memberNames? }
- 중복 날짜 체크 (같은 날짜에 경기 있으면 에러)
- autoGenerated: false
- createdById: 현재 사용자 ID
```

#### 4.3.2 경기 조회 API

```
백엔드에 GET /api/auth/members 엔드포인트를 만들어줘:
- 모든 회원 정보와 경기 정보를 함께 반환
- games 배열에 모든 경기 포함
- 각 경기의 createdBy 정보 포함
```

#### 4.3.3 경기 관리 컴포넌트 (GameManagement)

```
경기 관리 컴포넌트를 만들어줘:
- 경기 목록 테이블 (날짜, 시간, 장소, 이벤트 타입, 인원, 생성자)
- "경기 추가" 모달
  - 날짜, 시간 선택
  - 이벤트 타입 선택 (매치, 자체, 회식)
  - 장소 검색 (카카오맵 API 연동)
  - 회원 선택 (체크박스)
  - 용병 인원 입력
  - 수기 입력 (팀원 이름)
- 경기 수정/삭제 기능
- 자동생성된 경기 수정 시 "일정확정" 기능
```

### 4.4 갤러리 시스템

#### 4.4.1 사진 갤러리 API

```
백엔드에 다음 엔드포인트들을 만들어줘:
- GET /api/auth/gallery: 사진 목록 조회 (페이지네이션, 정렬, 필터링)
  - 인증 토큰이 있으면 좋아요 상태 포함
  - 비로그인도 접근 가능
- POST /api/auth/gallery/upload: 사진 업로드 (로그인 필요)
  - multipart/form-data로 이미지 파일 받기
  - Cloudinary에 업로드
  - Gallery 레코드 생성
- PUT /api/auth/gallery/:id: 사진 수정 (작성자만)
- DELETE /api/auth/gallery/:id: 사진 삭제 (작성자만)
- POST /api/auth/gallery/:id/like: 좋아요 토글
- POST /api/auth/gallery/:id/comments: 댓글 추가
- PUT /api/auth/gallery/:id/comments/:commentId: 댓글 수정
- DELETE /api/auth/gallery/:id/comments/:commentId: 댓글 삭제
- POST /api/auth/gallery/:id/view: 클릭 수 증가
```

#### 4.4.2 사진 갤러리 페이지 (PhotoGalleryPage)

```
사진 갤러리 페이지를 만들어줘:
- Instagram 스타일 그리드 레이아웃
- 정렬 옵션 (업로드순, 행사날짜순, 좋아요순, 댓글순)
- 필터링 (이벤트 타입: 매치, 자체, 회식, 기타)
- 썸네일 표시
  - 하단에 좋아요, 댓글, 클릭 수 표시 (툴팁)
  - 마우스 오버 시 좋아요 아이콘 표시
- 상세 모달
  - 이미지 확대 표시
  - 좋아요, 댓글, 클릭 수 표시
  - 댓글 목록 및 추가
  - 작성자만 수정/삭제 버튼 표시
- 업로드 기능 (로그인 필요)
  - 다중 이미지 선택 (최대 10장)
  - 이미지 압축
  - 캡션, 행사 날짜, 이벤트 타입, 태그 입력
- 비로그인 사용자도 사진 조회 가능
- 로그인한 사용자만 업로드 가능
```

#### 4.4.3 동영상 갤러리 API

```
백엔드에 다음 엔드포인트들을 만들어줘:
- GET /api/auth/videos/view-stats: 여러 동영상의 조회 수 조회
- POST /api/auth/videos/:videoKey/view: 동영상 조회 수 증가
```

#### 4.4.4 동영상 갤러리 페이지 (VideoGalleryPage)

```
동영상 갤러리 페이지를 만들어줘:
- YouTube 재생목록 자동 동기화
  - YouTube API로 재생목록 아이템 가져오기
  - localStorage에 저장
- 그리드 레이아웃
- 썸네일 표시
  - 하단에 좋아요, 댓글, 클릭 수 표시 (툴팁)
- 상세 모달
  - YouTube 영상 재생
  - 좋아요, 댓글, 클릭 수 표시
  - 댓글 목록 및 추가
- 비로그인 사용자도 동영상 조회 가능
```

### 4.5 관리자 페이지

#### 4.5.1 관리자 대시보드

```
관리자 대시보드 페이지를 만들어줘:
- 실시간 통계 카드
  - 총 회원 수
  - 이번 주 경기 수
  - 다음 주 투표 수
- 활동 분석 차트 (Recharts 사용)
- 최근 활동 로그
```

#### 4.5.2 회원 관리

```
회원 관리 컴포넌트를 만들어줘:
- 회원 목록 테이블
  - 이름, 이메일, 전화번호, 역할, 상태
  - 모바일에서 가로 스크롤 가능
- 회원 추가/수정/삭제 기능
- 역할 변경 (SUPER_ADMIN, ADMIN, MEMBER)
- 상태 변경 (활성, 비활성, 정지, 삭제)
- 비밀번호 초기화
- 권한별 기능 제한
```

#### 4.5.3 투표 결과 관리

```
투표 결과 관리 컴포넌트를 만들어줘:
- 투표 세션 목록
- 각 세션의 투표 결과 표시
  - 요일별 투표 수
  - 참여자 목록
- 투표 세션 생성/수정/삭제
- 투표 마감 처리
```

---

## 5. 고급 기능 구현

### 5.1 자동화 시스템

#### 5.1.1 주간 투표 세션 자동 생성

```
node-cron을 사용해서 매주 월요일 00:01에 자동으로 투표 세션을 생성하는 스케줄러를 만들어줘:
- 이번 주 월요일 날짜 계산
- 새로운 VoteSession 생성
- startTime: 현재 시간
- endTime: 다음 목요일 17시
- isActive: true
- 로그 기록
```

#### 5.1.2 투표 마감 자동 처리

```
매주 목요일 17:00에 투표 세션을 자동으로 마감하는 스케줄러를 만들어줘:
- 활성 세션 조회
- isCompleted: true로 변경
- 투표 결과 집계
- 자동생성된 경기 삭제
- 투표 결과에 따라 새로운 경기 자동 생성
- 로그 기록
```

#### 5.1.3 알림 시스템

```
알림 시스템을 만들어줘:
- 경기 당일 10시 알림 (node-cron)
  - 참여자에게 경기 일정 알림
- 목요일 10시 미투표자 알림
  - 투표하지 않은 회원에게 알림
- nodemailer를 사용한 이메일 발송
- Gmail API 연동 (선택사항)
```

### 5.2 PWA 기능

```
PWA 기능을 구현해줘:
- manifest.json 생성
  - 앱 이름, 아이콘, 테마 색상 설정
- Service Worker 등록
  - 오프라인 지원
  - 캐싱 전략
- PWA 설치 프롬프트
- 오프라인 페이지
```

### 5.3 카카오맵 API 연동

```
카카오맵 API를 연동해줘:
- 백엔드에 GET /api/auth/search-location 엔드포인트 생성
  - 카카오맵 API 호출
  - 장소 검색 결과 반환
- 프론트엔드에서 장소 검색 UI
  - 검색어 입력
  - 검색 결과 목록 표시
  - 장소 선택 시 자동 입력
```

### 5.4 클릭 수 추적

```
클릭 수 추적 기능을 구현해줘:
- Gallery 모델에 clickCount 필드 추가
- VideoViewStat 모델 생성 (videoKey, viewCount)
- 클릭 시 카운트 증가 API
- 프론트엔드에서 클릭 수 표시
  - 썸네일 하단 툴팁
  - 상세 모달에 표시
```

### 5.5 권한 시스템

```
권한 시스템을 구현해줘:
- 비로그인 사용자 접근 가능 페이지
  - 일정 페이지 (조회만, 투표는 로그인 필요)
  - 사진 갤러리 (조회만, 업로드는 로그인 필요)
  - 동영상 갤러리 (모든 기능)
- 로그인 필요 기능
  - 투표하기
  - 사진 업로드
  - 댓글 작성
  - 좋아요
- 관리자 전용 기능
  - 회원 관리
  - 경기 관리
  - 투표 결과 관리
```

---

## 6. 배포 및 최적화

### 6.1 환경 변수 설정

```
배포 환경에 필요한 환경 변수를 설정해줘:
- Render (백엔드)
  - DATABASE_URL
  - JWT_SECRET
  - KAKAO_API_KEY
  - CLOUDINARY_URL
  - GMAIL_USER, GMAIL_PASS
- Vercel (프론트엔드)
  - VITE_API_BASE_URL
```

### 6.2 데이터베이스 백업

```
데이터베이스 백업 시스템을 만들어줘:
- GitHub Actions로 매일 자동 백업
- Prisma를 사용한 데이터베이스 덤프
- GitHub Secrets에 백업 저장소 설정
```

### 6.3 모니터링

```
모니터링 시스템을 구현해줘:
- Winston 로깅
- 에러 로그 수집
- 성능 모니터링
- 헬스체크 엔드포인트
```

### 6.4 최적화

```
성능 최적화를 적용해줘:
- 이미지 압축 (업로드 시)
- 코드 스플리팅
- 레이지 로딩
- 캐싱 전략
- 번들 크기 최적화
```

---

## 📝 추가 팁

### 명령어 작성 시 주의사항

1. **구체적으로 작성**: "API를 만들어줘"보다는 "POST /api/auth/register 엔드포인트를 만들어줘"처럼 구체적으로 작성
2. **단계별로 나누기**: 큰 기능을 작은 단위로 나눠서 순차적으로 요청
3. **에러 처리 명시**: "에러 처리도 포함해줘"라고 명시
4. **UI 디자인 명시**: "Chakra UI를 사용해서", "Instagram 스타일로"처럼 디자인 요구사항 명시
5. **테스트 요청**: 각 기능 구현 후 "테스트해줘" 또는 "에러 확인해줘" 요청

### 효율적인 작업 순서

1. **백엔드 먼저**: API 엔드포인트를 먼저 만들고 테스트
2. **프론트엔드 후**: API가 완성되면 프론트엔드 구현
3. **기능별 완성**: 한 기능을 완전히 끝내고 다음 기능으로
4. **에러 즉시 수정**: 에러가 발생하면 즉시 수정 요청

### 자주 사용하는 패턴

```
"XXX 기능을 구현해줘. 다음을 포함해줘:
- 백엔드 API 엔드포인트
- 프론트엔드 페이지/컴포넌트
- 에러 처리
- 로딩 상태 표시
- 성공/실패 토스트 메시지"
```

---

## 🎯 완성 체크리스트

- [ ] 인증 시스템 (회원가입, 로그인, JWT)
- [ ] 일정 관리 (투표 시스템, 달력, 경기 관리)
- [ ] 갤러리 (사진/동영상, 좋아요, 댓글, 클릭 수)
- [ ] 관리자 페이지 (회원 관리, 통계, 투표 결과)
- [ ] 자동화 (주간 투표 세션, 알림)
- [ ] 권한 시스템 (비로그인 접근, 로그인 필요 기능)
- [ ] PWA 기능
- [ ] 카카오맵 API 연동
- [ ] 배포 설정 (Render, Vercel)
- [ ] 모니터링 및 백업

---

이 가이드를 따라하면 FC CHAL-GGYEO와 동일한 기능의 홈페이지를 효율적으로 구축할 수 있습니다! 🚀

